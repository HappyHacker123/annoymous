<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="hr" lang="hr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>DS-附录-中国科学-3</title><style type="text/css"> * {margin:0; padding:0; text-indent:0; }
 .s1 { color: black; font-family:"Times New Roman", serif; font-style: italic; font-weight: normal; text-decoration: underline; font-size: 10.5pt; }
 .s2 { color: black; font-family:华文楷体, serif; font-style: normal; font-weight: normal; text-decoration: underline; font-size: 10.5pt; }
 .s3 { color: black; font-family:"Wawati SC", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 .p, p { color: black; font-family:"Wawati SC", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; margin:0pt; }
 .s4 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 .h2, h2 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7.5pt; }
 .s5 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; }
 .s6 { color: #1F4E79; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 1pt; }
 .s7 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; }
 .s8 { color: #548235; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; }
 .s9 { color: #1F4E79; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; }
 .s10 { color: #F00; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4pt; }
 .s11 { color: black; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4pt; }
 .s12 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; }
 .s13 { color: black; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 3.5pt; vertical-align: 2pt; }
 .s14 { color: black; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; }
 .s15 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 1pt; }
 .s16 { color: #548235; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 1pt; }
 .s17 { color: #F00; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 3.5pt; vertical-align: 2pt; }
 .s18 { color: #F00; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; }
 .s19 { color: black; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4pt; vertical-align: 1pt; }
 .s20 { color: black; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4pt; vertical-align: 2pt; }
 .s21 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: -2pt; }
 .s22 { color: #1F4E79; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: -4pt; }
 .s23 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 2pt; }
 .s24 { color: black; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4pt; vertical-align: 4pt; }
 .s25 { color: black; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4pt; vertical-align: 3pt; }
 .s26 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt; }
 .s27 { color: #548235; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt; }
 .s28 { color: black; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; }
 .s29 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 1pt; }
 .s30 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 2pt; }
 .s31 { color: #548235; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 2pt; }
 .s32 { color: black; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; vertical-align: 1pt; }
 .s33 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 4pt; }
 .s34 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: -3pt; }
 .s35 { color: #548235; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: -3pt; }
 .s36 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: -4pt; }
 .s37 { color: #548235; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: -4pt; }
 .s38 { color: #F00; font-family:"Courier New", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 4.5pt; }
 .s39 { color: black; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; vertical-align: -1pt; }
 .s40 { color: #F00; font-family:"Courier New", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 4.5pt; vertical-align: -1pt; }
 .s41 { color: #F00; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; vertical-align: -1pt; }
 .s42 { color: #1F4E79; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; }
 .s43 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; }
 .s44 { color: black; font-family:"Wawati SC", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s45 { color: #1F4E79; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 3pt; }
 .s47 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; vertical-align: -3pt; }
 .s48 { color: #1F4E79; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: -2pt; }
 .s49 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: -1pt; }
 .s50 { color: #548235; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: -1pt; }
 .s51 { color: #1F4E79; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: -1pt; }
 .s52 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; vertical-align: -2pt; }
 .s53 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: -3pt; }
 .s54 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 6pt; vertical-align: 1pt; }
 .s55 { color: #595959; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4pt; }
 .s56 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5pt; vertical-align: -1pt; }
 .s58 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5pt; }
 .s59 { color: #1F4E79; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5pt; }
 .s60 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5pt; }
 .s61 { color: #548235; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5pt; }
 .s62 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 6pt; vertical-align: -3pt; }
 .s63 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5pt; vertical-align: 1pt; }
 .s64 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 6pt; vertical-align: -1pt; }
 .s65 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5pt; vertical-align: 2pt; }
 .s66 { color: #F00; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 3.5pt; }
 .s67 { color: black; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 3.5pt; }
 .s68 { color: #F00; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 3.5pt; }
 .s69 { color: black; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 3.5pt; }
 .s70 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 6pt; vertical-align: -3pt; }
 .s71 { color: #595959; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4pt; }
 .s72 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5pt; vertical-align: -1pt; }
 .s73 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5pt; }
 .s74 { color: #1F4E79; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5pt; }
 .s75 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5pt; }
 .s77 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5pt; vertical-align: -3pt; }
 .s78 { color: #595959; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4pt; vertical-align: 1pt; }
 .s80 { color: #1F4E79; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5pt; vertical-align: 2pt; }
 .s81 { color: #1F4E79; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5pt; vertical-align: 1pt; }
 .s82 { color: black; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 3.5pt; vertical-align: 1pt; }
 .s83 { color: #F00; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 3.5pt; vertical-align: 1pt; }
 .s84 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 6pt; vertical-align: -2pt; }
 .s85 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5pt; vertical-align: -2pt; }
 .h1 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s86 { color: #2F5597; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; vertical-align: -1pt; }
 .s87 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; vertical-align: -2pt; }
 .s88 { color: #1F4E79; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; vertical-align: 1pt; }
 .s89 { color: #1F4E79; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; }
 .s90 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; }
 .s91 { color: #548235; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; }
 .s92 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; }
 .s93 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; vertical-align: 3pt; }
 .s94 { color: #548235; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; vertical-align: 3pt; }
 .s95 { color: #2F5597; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; vertical-align: 1pt; }
 .s97 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 6pt; vertical-align: -1pt; }
 .s98 { color: #2F5597; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; vertical-align: -2pt; }
 .s99 { color: #F00; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 3.5pt; vertical-align: 2pt; }
 .s100 { color: black; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 3.5pt; vertical-align: 2pt; }
 .s101 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; vertical-align: 1pt; }
 .s102 { color: black; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 3.5pt; vertical-align: 4pt; }
 .s103 { color: black; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 3.5pt; vertical-align: 3pt; }
 .s104 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; vertical-align: 2pt; }
 .s105 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 6pt; }
 .s106 { color: #1F4E79; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; vertical-align: -1pt; }
 .s107 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 6pt; vertical-align: 2pt; }
 .s108 { color: #F00; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 3.5pt; vertical-align: -2pt; }
 .s109 { color: #1F4E79; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; vertical-align: -2pt; }
 .s110 { color: #1F4E79; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; vertical-align: -4pt; }
 .s111 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; vertical-align: 1pt; }
 .s113 { color: #1F4E79; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; }
 .s114 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; }
 .s115 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; vertical-align: 3pt; }
 .s116 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6pt; }
 .s117 { color: #548235; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; }
 .s118 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; }
 .s119 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 1pt; }
 .s120 { color: #548235; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 1pt; }
 h3 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; }
 .s121 { color: black; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; vertical-align: -1pt; }
 .s122 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: -2pt; }
 .s123 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6pt; vertical-align: 2pt; }
 .s124 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; }
 .s126 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6pt; }
 .s127 { color: #F00; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4pt; vertical-align: -2pt; }
 .s128 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6pt; vertical-align: -4pt; }
 .s130 { color: #548235; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: -4pt; }
 .s131 { color: #548235; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: -3pt; }
 .s132 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; vertical-align: 1pt; }
 .s133 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7pt; vertical-align: 2pt; }
 .s134 { color: #595959; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; }
 .s135 { color: #F00; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; }
 .s136 { color: #1F4E79; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 2pt; }
 .s137 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: 4pt; }
 .s138 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6pt; vertical-align: -3pt; }
 .s139 { color: #595959; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; vertical-align: -1pt; }
 .s140 { color: black; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4pt; }
 .s141 { color: #F00; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4pt; }
 .s142 { color: black; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4pt; }
 .s143 { color: #2F5597; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; }
 .s144 { color: #595959; font-family:"Courier New", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; vertical-align: 1pt; }
 .s146 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5.5pt; vertical-align: -1pt; }
 .s147 { color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 .s148 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 6pt; }
 .s149 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 5pt; vertical-align: 1pt; }
 h4 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 6.5pt; }
 .s151 { color: #F00; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4pt; }
 .s152 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; }
 .s153 { color: #548235; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; }
 .s154 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; vertical-align: -1pt; }
 .s155 { color: #548235; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 4.5pt; vertical-align: -1pt; }
 .s156 { color: black; font-family:"Wawati SC", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 li {display: block; }
 #l1 {padding-left: 0pt;counter-reset: c1 1; }
 #l1> li>*:first-child:before {counter-increment: c1; content: counter(c1, upper-latin)" "; color: black; font-family:"Times New Roman", serif; font-style: italic; font-weight: normal; text-decoration: underline; font-size: 10.5pt; }
 #l1> li:first-child>*:first-child:before {counter-increment: c1 0;  }
 li {display: block; }
 #l2 {padding-left: 0pt;counter-reset: d1 1; }
 #l2> li>*:first-child:before {counter-increment: d1; content: counter(d1, upper-latin)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10.5pt; }
 #l2> li:first-child>*:first-child:before {counter-increment: d1 0;  }
 #l3 {padding-left: 0pt;counter-reset: d2 1; }
 #l3> li>*:first-child:before {counter-increment: d2; content: counter(d1, upper-latin)"."counter(d2, decimal)" "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10.5pt; }
 #l3> li:first-child>*:first-child:before {counter-increment: d2 0;  }
 #l4 {padding-left: 0pt;counter-reset: d3 1; }
 #l4> li>*:first-child:before {counter-increment: d3; content: counter(d3, decimal)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 7.5pt; }
 #l4> li:first-child>*:first-child:before {counter-increment: d3 0;  }
 li {display: block; }
 #l5 {padding-left: 0pt;counter-reset: e1 1; }
 #l5> li>*:first-child:before {counter-increment: e1; content: counter(e1, lower-latin)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 #l5> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 li {display: block; }
 #l6 {padding-left: 0pt;counter-reset: f1 1; }
 #l6> li>*:first-child:before {counter-increment: f1; content: counter(f1, lower-latin)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 #l6> li:first-child>*:first-child:before {counter-increment: f1 0;  }
 li {display: block; }
 #l7 {padding-left: 0pt;counter-reset: f1 3; }
 #l7> li>*:first-child:before {counter-increment: f1; content: counter(f1, lower-latin)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 #l7> li:first-child>*:first-child:before {counter-increment: f1 0;  }
 li {display: block; }
 #l8 {padding-left: 0pt;counter-reset: g1 1; }
 #l8> li>*:first-child:before {counter-increment: g1; content: counter(g1, lower-latin)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 #l8> li:first-child>*:first-child:before {counter-increment: g1 0;  }
 li {display: block; }
 #l9 {padding-left: 0pt;counter-reset: h1 1; }
 #l9> li>*:first-child:before {counter-increment: h1; content: counter(h1, lower-latin)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 #l9> li:first-child>*:first-child:before {counter-increment: h1 0;  }
 li {display: block; }
 #l10 {padding-left: 0pt;counter-reset: i1 1; }
 #l10> li>*:first-child:before {counter-increment: i1; content: counter(i1, lower-latin)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 #l10> li:first-child>*:first-child:before {counter-increment: i1 0;  }
 li {display: block; }
 #l11 {padding-left: 0pt;counter-reset: j1 1; }
 #l11> li>*:first-child:before {counter-increment: j1; content: counter(j1, lower-latin)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 #l11> li:first-child>*:first-child:before {counter-increment: j1 0;  }
 li {display: block; }
 #l12 {padding-left: 0pt;counter-reset: k1 6; }
 #l12> li>*:first-child:before {counter-increment: k1; content: counter(k1, lower-latin)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 #l12> li:first-child>*:first-child:before {counter-increment: k1 0;  }
 li {display: block; }
 #l13 {padding-left: 0pt;counter-reset: l1 1; }
 #l13> li>*:first-child:before {counter-increment: l1; content: counter(l1, lower-latin)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 #l13> li:first-child>*:first-child:before {counter-increment: l1 0;  }
 li {display: block; }
 #l14 {padding-left: 0pt;counter-reset: m1 1; }
 #l14> li>*:first-child:before {counter-increment: m1; content: counter(m1, lower-latin)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 #l14> li:first-child>*:first-child:before {counter-increment: m1 0;  }
 li {display: block; }
 #l15 {padding-left: 0pt;counter-reset: n1 1; }
 #l15> li>*:first-child:before {counter-increment: n1; content: counter(n1, lower-latin)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 #l15> li:first-child>*:first-child:before {counter-increment: n1 0;  }
 li {display: block; }
 #l16 {padding-left: 0pt;counter-reset: o1 1; }
 #l16> li>*:first-child:before {counter-increment: o1; content: counter(o1, lower-latin)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 #l16> li:first-child>*:first-child:before {counter-increment: o1 0;  }
 li {display: block; }
 #l17 {padding-left: 0pt;counter-reset: p1 1; }
 #l17> li>*:first-child:before {counter-increment: p1; content: counter(p1, lower-latin)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 #l17> li:first-child>*:first-child:before {counter-increment: p1 0;  }
 li {display: block; }
 #l18 {padding-left: 0pt;counter-reset: q1 1; }
 #l18> li>*:first-child:before {counter-increment: q1; content: counter(q1, lower-latin)". "; color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt; }
 #l18> li:first-child>*:first-child:before {counter-increment: q1 0;  }
 table, tbody {vertical-align: top; overflow: visible; }
</style></head><body><ol id="l1"><li data-list-text="A"><p class="s1" style="padding-top: 5pt;padding-left: 13pt;text-indent: -7pt;text-align: left;"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="s2">附录 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></li></ol><p style="padding-top: 2pt;text-indent: 0pt;text-align: left;"><br/></p><ol id="l2"><li data-list-text="A"><p class="s3" style="padding-left: 25pt;text-indent: -19pt;text-align: left;"><a name="bookmark0">&zwnj;</a>附录</p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 15pt;line-height: 86%;text-align: justify;">在本附录中，我们将继续探讨 <span class="s4">Java </span>项目中的依赖异味，描述正文中未涉及异味的特征以及可能危害与触发场景。通过实证研究，我们确定了 <span class="s4">13 </span>类依赖异味，而正文已经涵盖了其中 <span class="s4">5 </span>类异味的特征以及 <span class="s4">3 </span>类异味的部分危害与相应触发场景。接下来，我们将详细介绍剩余未涉及的异味。</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l3"><li data-list-text="A.1"><p class="s3" style="padding-left: 34pt;text-indent: -28pt;text-align: left;">依赖异味分类与特征</p><p style="padding-top: 3pt;padding-left: 20pt;text-indent: 0pt;line-height: 13pt;text-align: left;">在正文中，我们已经介绍了异味 <span class="s4">1.6</span>、<span class="s4">1.7</span>、<span class="s4">1.8</span>、<span class="s4">2.2 </span>和 <span class="s4">2.3 </span>的特征，下文将继续介绍剩余的异味。</p><ol id="l4"><li data-list-text="1."><p style="padding-left: 32pt;text-indent: -11pt;line-height: 12pt;text-align: justify;">模块粒度</p><p class="s4" style="padding-left: 5pt;text-indent: 14pt;line-height: 86%;text-align: justify;"><b>(1.1) </b><span class="p">内外类名冲突</span>: <span class="p">这类异味的主要特征是模块与依赖库中包含完全限定名相同的类</span>. <a href="#bookmark3" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">在图</a>A1(a) <span class="p">对应的 </span>#GJS-8 [<b>?</b>] <span class="p">中</span>, <span class="p">模块 </span>gigya- java-sdk <span class="p">中声明类 </span>org.json.JSONObject, <span class="p">而这个类同样在其依赖库 </span>json <span class="p">中存在</span>, <span class="p">从而导致模块与依赖库 </span>json <span class="p">中包含了完全限定名相同的类</span>. <span class="p">这导致用户在试图使用与 </span>gigya-java-sdk <span class="p">中版本不同的的 </span>JSONObject <span class="p">时出现 </span>NoSuchMethodError, <span class="p">最终 </span>gigya-java-sdk <span class="p">中移除了冲突的类</span>.</p><p class="s4" style="padding-left: 5pt;text-indent: 15pt;line-height: 86%;text-align: justify;"><span class="p">这类异味在 </span>Maven <span class="p">和 </span>Gradle <span class="p">中皆存在</span>, <span class="p">这个其产生原因主要是 </span>Java <span class="p">虚拟机（</span>JVM<span class="p">）在提供的路径中发现多个同名类时</span>, <span class="p">只会加载其中一个</span>, <span class="p">并忽略其他的类 </span>[<b>?</b>]. <span class="p">这类异味往往不易被察觉</span>, <span class="p">尤其在构建可执行 </span>Jar <span class="p">包时</span>, <span class="p">由于配置文件未将当前模块自身声明为依赖库</span>, <span class="p">当遇到冲突类时</span>, Maven <span class="p">和 </span>Gradle <span class="p">会优先选择依赖库中的类进行打包</span>, <span class="p">而忽略当前模块中声明的类</span>.</p><p class="s4" style="padding-left: 5pt;text-indent: 15pt;line-height: 86%;text-align: justify;"><b>(1.2) </b><span class="p">外部类名冲突</span>: <span class="p">这类异味的主要特征是模块的依赖库之间包含完全限定名相同的类</span>.  <a href="#bookmark3" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">在图</a>A1(b) <span class="p">对应的 </span>#IJA-127 [<b>?</b>] <span class="p">中</span>, <span class="p">模块引用直接依赖 </span>imgui-java-app <span class="p">和被其引入的传递依赖 </span>imgui-java-binding, <span class="p">但 </span>imgui-java-app <span class="p">在打包时将一系列 </span>imgui-java-binding <span class="p">中的类也包含在其中</span>, <span class="p">导致两个依赖库之间出现了完全限定名相同的类</span>, <span class="p">最终开发者移除了 </span>imgui-java-binding <span class="p">中的类解决了类冲突</span>.</p><p style="padding-left: 5pt;text-indent: 15pt;line-height: 86%;text-align: justify;">这类异味在 <span class="s4">Maven </span>和 <span class="s4">Gradle </span>中皆存在<span class="s4">, </span>其产生原因和异味 <span class="s4">1.1 </span>相似<span class="s4">. </span>不同之处在于<span class="s4">, </span>这种异味涉及依赖库之间的冲突<span class="s4">, </span>而不是模块与依赖库之间的冲突<span class="s4">, </span>因此不会出现因为冲突类在模块中而被忽略的情况<span class="s4">. </span>在这种情况下<span class="s4">, Maven </span>和 <span class="s4">Gradle </span>项目都倾向于选择依赖树前序遍历序列中靠前的依赖库中的类<span class="s4">.</span></p><p class="s4" style="padding-left: 5pt;text-indent: 14pt;line-height: 86%;text-align: justify;"><b>(1.3) </b><span class="p">库版本冲突：这类异味的主要特征是依赖树中存在同一依赖库的不同版本</span>. <a href="#bookmark3" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">在图</a>A1(c) <span class="p">对应的 </span>#SELENIDE-1652 [<b>?</b>] <span class="p">中</span>, <span class="p">模块的直接依赖 </span>browsermob-core <span class="p">和 </span>selenide <span class="p">都引入了 </span>netty-all <span class="p">作为传递依赖</span>, <span class="p">但 </span>netty-all <span class="p">的版本不同</span>, <span class="p">最终只有一个版本的 </span>netty-all <span class="p">被选择</span>, <span class="p">其余会被忽略</span>, <span class="p">最终导致 </span>NoSuchMethodError. <span class="p">最终开发者移除了直接依赖 </span>browsermob-core <span class="p">解决了版本冲突</span>.</p><p class="s4" style="padding-left: 5pt;text-indent: 15pt;line-height: 86%;text-align: justify;"><span class="p">这类异味在 </span>Maven <span class="p">和 </span>Gradle <span class="p">中皆存在</span>, <span class="p">其产生原因主要在于依赖管理工具的版本调停机制</span>. <span class="p">当依赖树中存在同一依赖库的不同版本时</span>, <span class="p">最终只有一个版本的依赖库会被选择</span>. <span class="p">然而</span>, <span class="p">在 </span>Maven <span class="p">和 </span>Gradle <span class="p">下</span>, <span class="p">这类异味有不同的表现形式</span>, <span class="p">因为它们有着不同的版本调停机制</span>.<span class="p">在出现版本冲突时</span>, Maven <span class="p">会选择依赖树中离模块（也就是树根）最近的依赖库；而 </span>Gradle <span class="p">会选择较高版本的依赖库</span>. #SCG-79 [<b>?</b>] <span class="p">为例</span>,<span class="p">模块的依赖树中同时存在 </span>google-auth-library-credentials:0.4.0 <span class="p">和 </span>google-auth-library-credentials:0.7.0.  <span class="p">此时</span>, Maven <span class="p">选择版本 </span>0.4.0,<span class="p">而 </span>Gradle <span class="p">选择版本 </span>0.7.0. <span class="p">由于模块中实际使用的是 </span>0.7.0 <span class="p">版本</span>, <span class="p">引用了 </span>0.4.0 <span class="p">版本中不存在的类 </span>ServiceAccountSigner, <span class="p">因此依赖管理工具若为 </span>Maven <span class="p">则会出现 </span>ClassNotFoundException, <span class="p">若为 </span>Gradle <span class="p">则不会</span>.</p><p class="s4" style="padding-left: 5pt;text-indent: 15pt;line-height: 86%;text-align: justify;"><b>(1.4) </b><span class="p">依赖库未声明：这类异味的主要特征是项目实际使用的依赖库未在配置文件中声明</span>. <a href="#bookmark3" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">在图</a>A1(d) <span class="p">对应的 </span>#EL-1849 [<b>?</b>], <span class="p">模块使用了依赖库 </span>asm <span class="p">但未在自身的配置文件中声明</span>, <span class="p">但直接依赖 </span>moxy <span class="p">引入了 </span>asm <span class="p">作为其传递依赖</span>, <span class="p">从而让模块能够正常访问 </span>asm <span class="p">中的类以进行构建和运行</span>. <span class="p">最终开发者将 </span>asm <span class="p">声明为直接依赖</span>, <span class="p">解决了依赖库未声明的情况</span>.</p><p style="padding-left: 5pt;text-indent: 15pt;line-height: 86%;text-align: justify;">这类异味在 <span class="s4">Maven </span>和 <span class="s4">Gradle </span>中皆存在<span class="s4">, </span>其产生原因在于未声明的依赖库同时作为传递依赖存在<span class="s4">, </span>这使得在模块构建或者运行时并不会直接报告缺少声明的依赖库<span class="s4">. </span>这种情况下<span class="s4">, </span>开发者会误以为依赖库已经被正确地声明了<span class="s4">, </span>因为模块能够正常工作<span class="s4">.</span></p><p class="s4" style="padding-left: 5pt;text-indent: 15pt;line-height: 86%;text-align: justify;"><b>(1.5) </b><span class="p">依赖库未使用：异味的主要特征为模块在构建文件中声明的依赖库实际上并未被使用</span>.  <a href="#bookmark3" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">在图</a>A1(e) <span class="p">对应的 </span>#HFJS-581 [<b>?</b>] <span class="p">中</span>,<span class="p">项目在构建文件中声明了依赖库 </span>javax-samples, <span class="p">但实际上并未引用其中类</span>. <span class="p">最终开发者在配置文件中移除了依赖库 </span>javax-samples.</p><p style="padding-left: 5pt;text-indent: 15pt;line-height: 86%;text-align: justify;">这类异味在 <span class="s4">Maven </span>和 <span class="s4">Gradle </span>中皆存在<span class="s4">, </span>其产生原因主要是 <span class="s4">Maven </span>和 <span class="s4">Gradle </span>只会在无法找到对应依赖库时报错<span class="s4">, </span>而不会在出现冗余依赖库时报错<span class="s4">. </span>这意味着当模块中存在未被使用的依赖库时<span class="s4">, </span>构建工具并不会发出警告或报错信息<span class="s4">. </span>因此<span class="s4">, </span>开发者很容易忽视这些未使用的依赖库<span class="s4">, </span>错误地认为它们是模块所需的一部分<span class="s4">.</span></p></li><li data-list-text="2."><p style="padding-left: 32pt;text-indent: -11pt;line-height: 11pt;text-align: justify;">项目粒度</p><p class="s4" style="padding-left: 5pt;text-indent: 15pt;line-height: 86%;text-align: justify;"><b>(2.1) </b><span class="p">构建工具配置缺失</span>: <span class="p">异味的主要特征为项目中缺少对其所使用构建工具的配置</span>. <a href="#bookmark3" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">在图</a>A1(a) <span class="p">对应的 </span>PK-441 [<b>?</b>] <span class="p">中</span>, <span class="p">项目中缺少了对 </span>Maven <span class="p">必要的文件如 </span>maven-wrapper.properties, <span class="p">导致无法准确确定使用的 </span>Maven <span class="p">版本</span>. <span class="p">最终这种不一致性导致了开发环境与持续集成（</span>CI<span class="p">）中 </span>Maven <span class="p">版本的不匹配，进而导致项目输出的不一致</span>.</p><p style="padding-left: 5pt;text-indent: 15pt;line-height: 86%;text-align: justify;">这类异味在 <span class="s4">Maven </span>和 <span class="s4">Gradle </span>中皆存在<span class="s4">, </span>其产生原因是主要是项目开发者未对项目构建工具启动器进行配置<span class="s4">. </span>然而<span class="s4">, </span>相较于 <span class="s4">Gradle,</span>在 <span class="s4">Maven </span>中这类问题更容易出现<span class="s4">. </span>这主要是因为 <span class="s4">Gradle </span>的启动器概念早在其诞生之初就已经存在<span class="s4">, </span>而且官方文档和教程一直都在强调使用启动器的重要性<span class="s4">. </span>此外<span class="s4">, </span>在创建新项目时<span class="s4">, Gradle </span>会自动添加启动器配置<span class="s4">, </span>进一步推广了其使用<span class="s4">. </span>相反<span class="s4">, Maven </span>是在借鉴了 <span class="s4">Gradle </span>后才添加了启动器功能<span class="s4">, </span>这导致了相对于 <span class="s4">Gradle </span>项目<span class="s4">, Maven </span>项目中配置缺失的情况更为普遍<span class="s4">.</span></p><p class="s4" style="padding-left: 5pt;text-indent: 14pt;line-height: 86%;text-align: justify;"><b>(2.4) </b><span class="p">模块间库重复</span>: <span class="p">这类异味的主要特征是项目模块间包含未进行统一管理的相同依赖库</span>. <a href="#bookmark3" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">在图</a>A1(d) <span class="p">对应的 </span>#STARGATE-235 [<b>?</b>]<span class="p">中</span>, stargate <span class="p">在不同的模块中有一系列相同的依赖库</span>, <span class="p">如 </span>jetty-servlet <span class="p">等</span>, <span class="p">但他们的版本声明都分散在各自模块的配置文件中</span>, <span class="p">而没有利用 </span>Maven <span class="p">提供的 </span>dependencyManagement <span class="p">功能在项目中进行统一管理</span>. <span class="p">最终开发者取消了各模块中分散的版本声明</span>, <span class="p">而是统一进行管理</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:79.0258pt" cellspacing="0"><tr style="height:54pt"><td style="width:304pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p class="s5" style="padding-top: 1pt;padding-left: 9pt;text-indent: 0pt;text-align: left;"><a name="bookmark3">&zwnj;</a>(a) Type 1.1   <span class="s6">Depends on</span></p><p style="padding-top: 2pt;text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="60" height="23" alt="image" src="DS-附录-中国科学-3_files/Image_001.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="151" height="64" alt="image" src="DS-附录-中国科学-3_files/Image_002.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="23" height="23" alt="image" src="DS-附录-中国科学-3_files/Image_003.png"/></span></p><p class="s7" style="padding-left: 60pt;padding-right: 159pt;text-indent: -16pt;line-height: 82%;text-align: left;">Module <span style=" color: #548235;">mod   </span>Dependency <span style=" color: #548235;">lib </span><span style=" color: #1F4E79;">Contains class  Contains class</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="100" height="33" alt="image" src="DS-附录-中国科学-3_files/Image_004.png"/></span></p><p class="s10" style="padding-top: 2pt;padding-left: 52pt;text-indent: 0pt;line-height: 4pt;text-align: left;">mod.Dup     mod.Dup</p><p class="s11" style="padding-left: 41pt;text-indent: 0pt;line-height: 6pt;text-align: left;">public class <span style=" color: #F00;">Dup </span>{  public class <span style=" color: #F00;">Dup </span>{   <span class="s12">Conflict classes between</span></p><p class="s13" style="padding-left: 53pt;text-indent: 0pt;line-height: 4pt;text-align: left;">…<span class="s14">      </span>…<span class="s14">     </span><span class="s12">module and dependencies!</span></p><p class="s11" style="padding-left: 41pt;text-indent: 0pt;line-height: 5pt;text-align: left;">}      }<span class="s12">Conflict!</span></p></td></tr><tr style="height:51pt"><td style="width:304pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p class="s9" style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">Depends on   Depends on</p><p style="padding-top: 1pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 26pt;text-indent: 0pt;line-height: 7pt;text-align: left;">Module <span style=" color: #548235;">mod  </span>Dependency <span style=" color: #548235;">lib1 </span><span class="s15">Dependency </span><span class="s16">lib2</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="84" height="33" alt="image" src="DS-附录-中国科学-3_files/Image_005.png"/></span></p><p class="s9" style="padding-left: 80pt;text-indent: 0pt;line-height: 6pt;text-align: left;">Contains class   Contains class</p><p class="s17" style="padding-top: 1pt;padding-left: 61pt;text-indent: 0pt;line-height: 5pt;text-align: left;">lib.Dup<span class="s18">     </span>lib.Dup<span class="s18">     </span><span class="s12">Conflict classes</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="145" height="36" alt="image" src="DS-附录-中国科学-3_files/Image_006.png"/></span></p><p class="s11" style="padding-left: 49pt;text-indent: 0pt;line-height: 52%;text-align: left;">public class <span style=" color: #F00;">Dup </span>{  public class <span style=" color: #F00;">Dup </span>{</p><p class="s19" style="padding-left: 62pt;text-indent: 0pt;line-height: 5pt;text-align: left;">…     <span class="s12">Conflict!</span>…      <span class="s12">between dependencies!</span></p><p class="s5" style="padding-left: 9pt;text-indent: 0pt;line-height: 7pt;text-align: left;">(b) Type 1.2 <span class="s20">}       </span><span class="s19">}</span></p></td></tr><tr style="height:47pt"><td style="width:304pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p style="text-indent: 0pt;text-align: left;"><span><img width="149" height="52" alt="image" src="DS-附录-中国科学-3_files/Image_007.png"/></span></p><p class="s9" style="padding-left: 37pt;text-indent: 0pt;text-align: left;">Depends on   Depends on</p><p class="s7" style="padding-top: 4pt;padding-left: 57pt;padding-right: 73pt;text-indent: 110pt;line-height: 74%;text-align: left;"><span style=" color: #F00;">Conflict versions of the </span>Dependency <span style=" color: #548235;">lib1 </span>Dependency <span style=" color: #548235;">lib3:</span><span style=" color: #F00;">v1.0.0   </span><span class="s21">same dependency!</span></p><p class="s7" style="padding-left: 13pt;text-indent: 0pt;line-height: 22%;text-align: left;">Module <span style=" color: #548235;">mod      </span><span class="s22">Depends on</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="22" alt="image" src="DS-附录-中国科学-3_files/Image_008.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="89" height="33" alt="image" src="DS-附录-中国科学-3_files/Image_009.png"/></span></p><p class="s12" style="padding-left: 38pt;padding-right: 57pt;text-indent: 0pt;text-align: center;">Conflict!</p><p class="s7" style="padding-left: 9pt;text-indent: 0pt;text-align: left;"><span class="s5">(c) Type 1.3  </span>Dependency <span style=" color: #548235;">lib2 </span>Dependency <span style=" color: #548235;">lib3:</span><span style=" color: #F00;">v2.0.0</span></p></td></tr><tr style="height:57pt"><td style="width:304pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p style="text-indent: 0pt;text-align: left;"><span><img width="286" height="74" alt="image" src="DS-附录-中国科学-3_files/Image_010.png"/></span></p><p class="s5" style="padding-left: 9pt;text-indent: 0pt;line-height: 7pt;text-align: left;">(d) Type 1.4</p><p class="s13" style="padding-left: 16pt;text-indent: 0pt;line-height: 8pt;text-align: left;">import<span class="s14"> </span>lib2.A<span class="s14">  </span><span class="s8">mod </span><span class="s12">uses transitive dependency </span><span class="s8">lib2 </span><span class="s12">directly  </span><span class="s23">Dependency</span></p><p class="s10" style="padding-left: 21pt;padding-right: 73pt;text-indent: -5pt;line-height: 8pt;text-align: left;">A classA = new A();  <span class="s12">without declaration in pom.xml!   </span><span class="s23">undeclared but used! </span><span class="s9">Contains code</span></p><p class="s6" style="padding-left: 30pt;text-indent: 0pt;line-height: 7pt;text-align: left;">Depends on    Depends on    <span class="s9">Contains   </span><span class="s24">lib2.A</span></p><p class="s11" style="padding-left: 61pt;padding-right: 22pt;text-indent: 0pt;line-height: 3pt;text-align: center;">public class A {</p><p class="s9" style="padding-left: 38pt;padding-right: 43pt;text-indent: 0pt;line-height: 6pt;text-align: center;">class   <span class="s11">...</span></p><p class="s7" style="padding-left: 10pt;text-indent: 0pt;line-height: 8pt;text-align: left;">Module <span style=" color: #548235;">mod </span>Dependency <span style=" color: #548235;">lib1:</span><span style=" color: #F00;">4.0.0 </span>Dependency <span style=" color: #548235;">lib2  </span><span class="s25">}</span></p></td></tr><tr style="height:52pt"><td style="width:304pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p class="s5" style="padding-left: 10pt;text-indent: 0pt;line-height: 8pt;text-align: left;">(e) Type 1.5</p><p style="text-indent: 0pt;text-align: left;"><span><img width="128" height="33" alt="image" src="DS-附录-中国科学-3_files/Image_011.png"/></span></p><p class="s9" style="padding-top: 5pt;padding-left: 48pt;text-indent: 0pt;text-align: left;">Depends on</p><p style="padding-top: 1pt;text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="99" height="36" alt="image" src="DS-附录-中国科学-3_files/Image_012.png"/></span></p><p class="s7" style="padding-left: 46pt;padding-right: 87pt;text-indent: -25pt;text-align: left;"><span class="s26">Module </span><span class="s27">mod    </span><span class="s26">Dependency </span><span class="s27">lib1    </span><span style=" color: #F00;">Dependency declared but unused! </span><span style=" color: #548235;">lib1 </span>is <span style=" color: #F00;">declared </span>by <span style=" color: #548235;">mod</span>, but <span style=" color: #F00;">no</span></p><p class="s7" style="padding-left: 46pt;text-indent: 0pt;line-height: 6pt;text-align: left;">class in <span style=" color: #548235;">lib1 </span>is <span style=" color: #F00;">used</span></p></td></tr><tr style="height:50pt"><td style="width:304pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p class="s28" style="padding-left: 38pt;padding-right: 58pt;text-indent: 0pt;line-height: 3pt;text-align: center;">&lt;dependency&gt;</p><p style="text-indent: 0pt;text-align: left;"><span><img width="77" height="23" alt="image" src="DS-附录-中国科学-3_files/Image_013.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="211" height="26" alt="image" src="DS-附录-中国科学-3_files/Image_014.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="37" height="4" alt="image" src="DS-附录-中国科学-3_files/Image_015.png"/></span></p><p class="s6" style="padding-left: 43pt;text-indent: 0pt;line-height: 6pt;text-align: left;">Depends on    <span class="s9">Related config </span><span class="s28">&lt;groupId&gt;example&lt;/groupId&gt;</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="82" height="33" alt="image" src="DS-附录-中国科学-3_files/Image_016.png"/></span></p><p class="s28" style="padding-left: 138pt;text-indent: 0pt;line-height: 6pt;text-align: left;">&lt;artifactId&gt;lib&lt;/artifactId&gt;   <span class="s29">Actual scope deviates</span></p><p class="s28" style="padding-left: 136pt;text-indent: 0pt;line-height: 5pt;text-align: left;">&lt;version&gt;1.0.0&lt;/version&gt;     <span class="s12">from expected scope!</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="22" height="22" alt="image" src="DS-附录-中国科学-3_files/Image_017.png"/></span></p><p class="s30" style="padding-left: 14pt;text-indent: 0pt;line-height: 7pt;text-align: left;">Module <span style=" color: #548235;">mod     </span>Dependency <span style=" color: #548235;">lib   </span><span class="s32">&lt;/dependency&gt; </span><span class="s7">Scope undeclared, default to </span><span class="s12">compile</span></p><p class="s7" style="padding-top: 2pt;padding-left: 38pt;padding-right: 61pt;text-indent: 0pt;text-align: center;">Expected scope : <span style=" color: #F00;">test      </span>Actual scope : <span style=" color: #F00;">compile</span></p><p class="s5" style="padding-top: 4pt;padding-left: 10pt;text-indent: 0pt;line-height: 8pt;text-align: left;">(f) Type 1.6              <span class="s23">Conflict!</span></p></td></tr><tr style="height:47pt"><td style="width:304pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p style="text-indent: 0pt;text-align: left;"><span><img width="192" height="60" alt="image" src="DS-附录-中国科学-3_files/Image_018.png"/></span></p><p class="s9" style="padding-top: 2pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">Depends on     Depends on</p><p style="padding-top: 2pt;text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="22" height="22" alt="image" src="DS-附录-中国科学-3_files/Image_019.png"/></span></p><p class="s7" style="padding-left: 12pt;text-indent: 0pt;line-height: 8pt;text-align: left;">Module <span style=" color: #548235;">mod     </span><span class="s30">Dependency </span><span class="s31">lib1   </span>Dependency <span style=" color: #548235;">lib2</span><span style=" color: #F00;">:compile</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="134" height="33" alt="image" src="DS-附录-中国科学-3_files/Image_020.png"/></span></p><p class="s12" style="padding-right: 2pt;text-indent: 0pt;line-height: 6pt;text-align: right;">Same dependency with conflict scopes!</p><p class="s5" style="padding-top: 2pt;padding-left: 10pt;text-indent: 0pt;text-align: left;">(g) Type 1.7    <span class="s7">Dependency </span><span class="s8">lib2</span><span class="s12">:test    </span><span class="s33">Conflict!</span></p></td></tr><tr style="height:59pt"><td style="width:304pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p style="text-indent: 0pt;text-align: left;"><span><img width="23" height="23" alt="image" src="DS-附录-中国科学-3_files/Image_021.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="168" height="57" alt="image" src="DS-附录-中国科学-3_files/Image_022.png"/></span></p><p class="s5" style="padding-left: 10pt;text-indent: 0pt;line-height: 7pt;text-align: left;">(h) Type 1.8</p><p class="s28" style="padding-left: 41pt;padding-right: 22pt;text-indent: 0pt;line-height: 4pt;text-align: center;">&lt;dependency&gt;</p><p class="s9" style="padding-left: 43pt;text-indent: 0pt;line-height: 7pt;text-align: left;">Depends on    <span class="s6">Related config in </span><span class="s29">Maven </span><span class="s28">&lt;groupId&gt;example&lt;/groupId&gt;</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="117" height="34" alt="image" src="DS-附录-中国科学-3_files/Image_023.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="11" height="26" alt="image" src="DS-附录-中国科学-3_files/Image_024.png"/></span></p><p class="s28" style="padding-left: 157pt;text-indent: 0pt;text-align: left;">&lt;artifactId&gt;lib&lt;/artifactId&gt;</p><p class="s28" style="padding-top: 1pt;padding-left: 11pt;text-indent: 0pt;line-height: 69%;text-align: left;"><span class="s34">Module </span><span class="s35">mod     </span><span class="s36">Dependency </span><span class="s37">lib       </span>&lt;version&gt;<span class="s38">1.0.0</span>&lt;/version&gt;</p><p class="s28" style="padding-left: 44pt;padding-right: 22pt;text-indent: 0pt;line-height: 3pt;text-align: center;">&lt;/dependency&gt;</p><p class="s8" style="padding-top: 2pt;padding-left: 55pt;padding-right: 4pt;text-indent: -6pt;line-height: 75%;text-align: left;">Use Maven and Gradle              <span class="s21">Conflict!   </span><span style=" color: #F00;">Same dependency with conflict </span>at the same time!   <span class="s39">implementation “example:lib:</span><span class="s40">2.0.0</span><span class="s41">”  </span><span style=" color: #F00;">versions in Maven and Gradle!</span></p></td></tr></table><p style="padding-top: 6pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s42" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Related config in <span style=" color: #F00;">Gradle</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s42" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"/><p class="s42" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: center;">图 <span class="h2">A1 </span><span class="s44">模块粒度依赖异味特征实例</span></p><h2 style="text-indent: 0pt;text-align: center;">Figure A1  <span class="s4">Examples of characteristics of Module-Level Dependency Smell.</span></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 15pt;line-height: 86%;text-align: justify;">这类异味在 <span class="s4">Maven </span>和 <span class="s4">Gradle </span>中皆存在<span class="s4">, </span>其产生原因主要是开发者对 <span class="s4">Maven </span>和 <span class="s4">Gradle </span>提供统一依赖管理机制的忽略<span class="s4">, </span>它们都提供了相关机制来集中管理项目中的依赖版本<span class="s4">, </span>以确保在不同模块中使用相同的库版本<span class="s4">.</span></p><p class="s4" style="padding-left: 20pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><b>(2.5) </b><span class="p">模块间库冲突</span>: <span class="p">这类异味的主要特征为项目多个模块中使用了不同版本的同一依赖库</span>. <a href="#bookmark3" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">在图</a>A1(e) <span class="p">对应的 </span>#PULSAR-2642 [<b>?</b>]</p><p style="text-indent: 0pt;line-height: 12pt;text-align: center;">中<span class="s4">, </span>项目 <span class="s4">pulsar </span>的模块 <span class="s4">pulsar-client </span>和模块 <span class="s4">pulsar-client-schema </span>中分别使用了 <span class="s4">protobuf </span>的 <span class="s4">2.0 </span>和 <span class="s4">3.0 </span>版本<span class="s4">. </span>由于 <span class="s4">protobuf:3.0 </span>相较于</p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 86%;text-align: justify;">2.0 <span class="p">版本能力更强</span>, pular <span class="p">计划最终将所有模块中 </span>protobuf <span class="p">版本升级为 </span>3.0, <span class="p">但目前尚未完成这一过程</span>, <span class="p">最终导致导致模块之间出现依赖库的版本冲突</span>.</p><p style="padding-left: 5pt;text-indent: 15pt;line-height: 86%;text-align: justify;">这类异味在 <span class="s4">Maven </span>和 <span class="s4">Gradle </span>中皆存在<span class="s4">, </span>其主要有两种产生原因<span class="s4">. </span>首先<span class="s4">, </span>项目可能考虑到旧版本依赖库兼容性的考虑或者正处于依赖库的升级过程中<span class="s4">, </span>从而被迫在不同模块中使用不同版本的依赖库<span class="s4">, </span>上例即对应这类产生原因<span class="s4">. </span>其次<span class="s4">, </span>另一种产生原因是由于项目中出现了依赖库分散管理的情况（即异味 <span class="s4">2.4</span>）<span class="s4">, </span>从而对单一模块依赖库版本的修改未同步到其他模块<span class="s4">, </span>进而引发模块间的依赖库版本冲突问题<span class="s4">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:95.4075pt" cellspacing="0"><tr style="height:31pt"><td style="width:271pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F" colspan="3"><p class="s45" style="padding-top: 5pt;padding-left: 26pt;text-indent: 0pt;line-height: 8pt;text-align: left;">Run Maven <span style=" color: #F00;">v3.8.6  </span><span class="s12">maven-wrapper.properties</span></p><p class="s9" style="padding-left: 26pt;text-indent: 0pt;line-height: 5pt;text-align: left;">on development stage           Run Maven <span style=" color: #F00;">v3.9.0 </span>on CI  <span style=" color: #F00;">maven-wrapper.properties</span></p><p class="s47" style="padding-top: 1pt;padding-left: 2pt;text-indent: 0pt;line-height: 18%;text-align: left;">( <span class="s30">Project </span><span class="s31">pr                   </span><span class="s9">due to missing config     </span><span class="s12">missing!</span></p><p class="s5" style="padding-left: 4pt;text-indent: 0pt;line-height: 4pt;text-align: left;">a) Type 2.1</p></td></tr><tr style="height:30pt"><td style="width:271pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F" colspan="3"><p class="s9" style="padding-top: 3pt;padding-left: 28pt;text-indent: 0pt;line-height: 6pt;text-align: left;">Run Gradle using     Run wrapper jar</p><p class="s48" style="padding-left: 28pt;text-indent: 0pt;line-height: 80%;text-align: left;">wrapper scripts             <span class="s12">gradle-wrapper.jar</span></p><p class="s7" style="padding-left: 9pt;text-indent: 0pt;line-height: 6pt;text-align: left;">Project <span style=" color: #548235;">pr     </span><span class="s49">Gradle wrapper script </span><span class="s50">gradlew             </span><span style=" color: #F00;">gradle-wrapper.jar missing!</span></p><p class="s5" style="padding-left: 2pt;text-indent: 0pt;line-height: 7pt;text-align: left;">(b) Type 2.2</p></td></tr><tr style="height:17pt"><td style="width:140pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-right-style:solid;border-right-width:1pt"><p class="s9" style="padding-top: 2pt;padding-left: 27pt;padding-right: 3pt;text-indent: 0pt;line-height: 7pt;text-align: left;">Run Gradle <span style=" color: #F00;">v5.6.4    </span><span class="s51">Run wrapper jar </span>using wrapper scripts</p></td><td style="width:53pt;border-top-style:dashed;border-top-width:1pt;border-top-color:#7F7F7F;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s12" style="padding-top: 5pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">gradle-wrapper.jar</p></td><td style="width:78pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:solid;border-left-width:1pt;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 21pt;text-indent: 0pt;line-height: 5pt;text-align: left;">gradle-wrapper.jar</p></td></tr><tr style="height:22pt"><td style="width:271pt;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F" colspan="3"><p class="s7" style="padding-left: 8pt;text-indent: 0pt;line-height: 6pt;text-align: left;">Project <span style=" color: #548235;">pr     </span>Gradle wrapper script <span style=" color: #548235;">gradlew     </span><span class="s29">Conflict!      </span><span style=" color: #F00;">checksum mismatch!</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 2pt;text-indent: 0pt;line-height: 74%;text-align: left;"><span class="s52">(c) Type 2.3   </span>Expected checksum for <span style=" color: #F00;">v5.6.4 </span>: <span style=" color: #F00;">3dc39a   </span>Actual checksum : <span style=" color: #F00;">ad63ba</span></p></td></tr><tr style="height:47pt"><td style="width:271pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F" colspan="3"><p class="s9" style="padding-top: 2pt;padding-left: 27pt;text-indent: 0pt;text-align: left;">Contains  Depends on</p><p class="s12" style="padding-top: 1pt;padding-left: 199pt;text-indent: 0pt;text-align: left;">Dependencies across modules</p><p class="s7" style="padding-left: 9pt;text-indent: 0pt;text-align: left;">Project <span style=" color: #548235;">pr  </span><span class="s49">Module </span><span class="s50">mod1 </span>Dependency <span style=" color: #548235;">lib:</span><span style=" color: #F00;">v1.0.0              managed separately!</span></p><p class="s6" style="padding-top: 1pt;padding-left: 64pt;text-indent: 0pt;text-align: left;">Depends on   <span class="s12">Not centrally managed!</span></p><p class="s5" style="padding-top: 4pt;padding-left: 2pt;text-indent: 0pt;line-height: 7pt;text-align: left;">(d) Type 2.4 <span class="s49">Module </span><span class="s50">mod2 </span><span class="s7">Dependency </span><span class="s8">lib:</span><span class="s12">v1.0.0</span></p></td></tr><tr style="height:51pt"><td style="width:271pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F" colspan="3"><p class="s9" style="padding-top: 3pt;padding-left: 27pt;text-indent: 0pt;text-align: left;">Contains  Depends on</p><p class="s12" style="padding-left: 199pt;text-indent: 0pt;text-align: left;">Dependencies across modules</p><p class="s7" style="padding-left: 8pt;text-indent: 0pt;text-align: left;">Project <span style=" color: #548235;">pr  </span><span class="s49">Module </span><span class="s50">mod1 </span>Dependency <span style=" color: #548235;">lib:</span><span style=" color: #F00;">v1.0.0              managed separately!</span></p><p class="s9" style="padding-top: 1pt;padding-left: 64pt;text-indent: 0pt;text-align: left;">Depends on   <span class="s53">Conflict!</span></p><p class="s52" style="padding-top: 5pt;padding-left: 2pt;text-indent: 0pt;line-height: 78%;text-align: left;">(e) Type 2.5 <span class="s49">Module </span><span class="s50">mod2 </span><span class="s7">Dependency </span><span class="s8">lib:</span><span class="s12">v2.0.0</span></p></td></tr></table><p style="padding-top: 6pt;text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="350" height="277" alt="image" src="DS-附录-中国科学-3_files/Image_025.png"/></span></p><p class="s42" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Contains</p><p style="text-indent: 0pt;text-align: left;"/><p class="s42" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Contains</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: center;">图 <span class="h2">A2 </span><span class="s44">项目粒度依赖异味特征实例</span></p><h2 style="text-indent: 0pt;text-align: center;">Figure A2 <span class="s4">Examples of characteristics of Project-Level Dependency Smell.</span></h2><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ol></li><li data-list-text="A.2"><p class="s3" style="padding-left: 34pt;text-indent: -28pt;text-align: left;"><a name="bookmark2">&zwnj;</a>依赖异味危害与触发场景</p></li></ol></li></ol><p style="padding-top: 4pt;padding-left: 20pt;text-indent: 0pt;line-height: 13pt;text-align: left;">在正文中，我们已经介绍了异味 <span class="s4">1.4</span>、<span class="s4">1.6 </span>和 <span class="s4">1.7 </span>的部分危害与对应触发场景<span class="s4">. </span>下文将继续介绍剩余异味的可能危害以及异味 <span class="s4">1.4</span>、<span class="s4">1.6</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">和 <span class="s4">1.7 </span>未在正文中被介绍的危害，并介绍这些危害对应的触发场景。</p><h2 style="padding-left: 20pt;text-indent: 0pt;line-height: 12pt;text-align: left;">A. <span class="p">模块粒度</span></h2><h2 style="padding-left: 20pt;text-indent: 0pt;line-height: 12pt;text-align: left;">(1.1) <span class="p">内外类冲突</span><span class="s4">:</span></h2><p style="padding-left: 5pt;text-indent: 14pt;line-height: 86%;text-align: left;">内外类冲突可能引发一系列严重的后果，包括但不限于模块构建失败、运行时错误以及运行时语义冲突。以下将详细阐述这些危害的具体触发场景。</p><ol id="l5"><li data-list-text="a."><p class="s4" style="padding-left: 30pt;text-indent: -9pt;line-height: 86%;text-align: justify;"><span class="p">构建失败</span>: <a href="#bookmark4" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">其触发场景为模块源码中调用了依赖库中同名冲突类独有的方法。以图</a>A3(a) <span class="p">为例，模块 </span>mod <span class="p">和依赖库 </span>lib <span class="p">中均存在名为 </span>Dup <span class="p">的冲突类，但方法 </span>methodLib <span class="p">仅在 </span>lib <span class="p">中的 </span>Dup <span class="p">类中定义。若模块 </span>mod <span class="p">试图调用该方法时，由于该方法在模块自身的 </span>Dup <span class="p">类中不存在，会导致构建失败。</span></p></li><li data-list-text="b."><p class="s4" style="padding-left: 31pt;text-indent: -10pt;line-height: 86%;text-align: justify;"><a href="#bookmark4" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">运行时错误：其触发场景为模块运行时调用了依赖库中同名冲突类独有的方法。以图</a>A3(b) <span class="p">为例，与上例类似，模块 </span>mod <span class="p">和依赖库 </span>lib <span class="p">中同样存在冲突类 </span>Dup<span class="p">，并且方法 </span>methodLib <span class="p">同样仅在 </span>lib <span class="p">中的 </span>Dup <span class="p">中存在。但此时 </span>mod <span class="p">并未直接调用 </span>methodLib<span class="p">，而是调用了 </span>RunDup <span class="p">中的 </span>runMethodLib <span class="p">方法，间接调用了 </span>methodLib<span class="p">。此时虽然模块能正常构建，但在运行时则无法找到对应方法，进而造成运行时错误。</span></p></li><li data-list-text="c."><p class="s4" style="padding-left: 30pt;text-indent: -9pt;line-height: 86%;text-align: justify;"><a href="#bookmark4" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">运行时语义冲突：其触发场景为模块运行时调用了冲突类中签名相同但实现不同的方法。以图</a>A3(c) <span class="p">为例，模块 </span>mod <span class="p">和依赖库 </span>lib<span class="p">中存在冲突类 </span>Dup <span class="p">和同签名方法 </span>methodLib<span class="p">，但其具体实现不同。当 </span>mod <span class="p">调用 </span>methodLib <span class="p">时就会出现语义冲突，预期调用的是 </span>mod<span class="p">中的 </span>Dup <span class="p">类，对应的 </span>methodDup <span class="p">返回</span>”Module”<span class="p">，而实际调用的是 </span>Lib <span class="p">中的 </span>Dup <span class="p">类，对应的 </span>methodDup <span class="p">返回</span>”Lib”<span class="p">。</span></p></li></ol><h2 style="padding-left: 20pt;text-indent: 0pt;line-height: 12pt;text-align: left;">(1.2) <span class="p">外部类冲突</span></h2><p style="padding-left: 5pt;text-indent: 15pt;line-height: 86%;text-align: left;">外部类冲突可能引发一系列严重的后果，包括但不限于模块构建失败、运行时错误以及运行时语义冲突。以下将详细阐述这些危害的具体触发场景。</p><ol id="l6"><li data-list-text="a."><p class="s4" style="padding-left: 30pt;text-indent: -9pt;line-height: 86%;text-align: justify;"><a href="#bookmark5" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">构建失败：其触发场景为模块源码中调用了仅存在于被遮蔽的同名冲突类中的方法。以图</a>A6(a) <span class="p">为例，模块 </span>mod <span class="p">的依赖库 </span>lib1 <span class="p">和 </span>lib2 <span class="p">中存在冲突类 </span>Dup<span class="p">，</span>mod <span class="p">试图调用仅存在于 </span>lib2 <span class="p">中的方法 </span>methodLib2<span class="p">，但由于 </span>lib1 <span class="p">在依赖树中与 </span>mod <span class="p">距离更近，最终 </span>lib2 <span class="p">中的类 </span>Dup <span class="p">被忽略，导致构建失败。</span></p></li><li data-list-text="b."><p class="s4" style="padding-left: 31pt;text-indent: -10pt;line-height: 12pt;text-align: justify;"><a href="#bookmark5" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">运行时错误：其触发场景为项目运行时调用了仅存在于被遮蔽的同名冲突类中的方法。以图</a>A6(b) <span class="p">为例，模块 </span>mod <span class="p">的依赖库 </span>lib1</p><p style="text-indent: 0pt;line-height: 13pt;text-align: center;">和 <span class="s4">lib2 </span>中存在冲突类 <span class="s4">Dup</span>，<span class="s4">mod </span>试图调用 <span class="s4">lib2 </span>中的方法 <span class="s4">runMtdLib</span>，其间接调用了 <span class="s4">Dup </span>中的方法 <span class="s4">methodLib2</span>。由于并未直接调用</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="77" height="31" alt="image" src="DS-附录-中国科学-3_files/Image_026.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="132" height="33" alt="image" src="DS-附录-中国科学-3_files/Image_027.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="214" height="81" alt="image" src="DS-附录-中国科学-3_files/Image_028.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="132" height="33" alt="image" src="DS-附录-中国科学-3_files/Image_029.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="45" height="30" alt="image" src="DS-附录-中国科学-3_files/Image_030.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="77" height="31" alt="image" src="DS-附录-中国科学-3_files/Image_031.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="7" alt="image" src="DS-附录-中国科学-3_files/Image_032.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="7" alt="image" src="DS-附录-中国科学-3_files/Image_033.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="65" height="30" alt="image" src="DS-附录-中国科学-3_files/Image_034.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="268" height="317" alt="image" src="DS-附录-中国科学-3_files/Image_035.png"/></span></p><p class="s54" style="text-indent: 0pt;line-height: 8pt;text-align: left;">(a) Hazard 1 <span class="s55">import lib.Dup</span></p><p style="padding-top: 1pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s55" style="padding-left: 36pt;text-indent: -22pt;text-align: left;"><span class="s56">Contains </span>Dup classDup = new Dup(); classDup.<span style=" color: #F00;">methodLib2</span>();</p><p style="text-indent: 0pt;text-align: left;"/><p class="s58" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Build Error</p><p style="text-indent: 0pt;text-align: left;"/><p class="s59" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Depends on  Contains class</p><p style="text-indent: 0pt;text-align: left;"/><p class="s60" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Module <span style=" color: #548235;">mod</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s60" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Dependency <span style=" color: #548235;">lib1</span></p><p class="s59" style="padding-top: 1pt;padding-left: 26pt;text-indent: 0pt;text-align: left;">Contains class</p><p style="text-indent: 0pt;text-align: left;"/><p class="s58" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Shadowed!</p><p style="text-indent: 0pt;text-align: left;"/><p class="s60" style="padding-left: 41pt;text-indent: 0pt;line-height: 6pt;text-align: left;">Dependency <span style=" color: #548235;">lib2</span></p><p class="s62" style="padding-top: 2pt;text-indent: 0pt;line-height: 59%;text-align: left;">(b) Hazard 3 <span class="s55">import lib.RunDup</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s55" style="text-indent: 0pt;line-height: 6pt;text-align: left;"><span class="s63">Contains </span>runner.<span style=" color: #F00;">runMtdLib</span>();</p><p style="text-indent: 0pt;text-align: left;"/><p class="s55" style="text-indent: 0pt;text-align: left;">RunDup runner = new RunDup();</p><p style="text-indent: 0pt;text-align: left;"/><p class="s58" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Runtime Error</p><p style="text-indent: 0pt;text-align: left;"/><p class="s59" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"/><p class="s59" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Contains class</p><p style="text-indent: 0pt;text-align: left;"/><p class="s60" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Module <span style=" color: #548235;">mod</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s60" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Dependency <span style=" color: #548235;">lib1</span></p><p class="s59" style="padding-top: 1pt;padding-left: 26pt;text-indent: 0pt;text-align: left;">Contains class</p><p style="text-indent: 0pt;text-align: left;"/><p class="s58" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Shadowed!</p><p style="text-indent: 0pt;text-align: left;"/><p class="s60" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Dependency <span style=" color: #548235;">lib2</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s64" style="text-indent: 0pt;line-height: 7pt;text-align: left;">(c) Hazard 4 <span class="s55">import lib.Dup</span></p><p class="s55" style="padding-top: 1pt;padding-left: 36pt;text-indent: -22pt;line-height: 112%;text-align: left;"><span class="s65">Contains </span>Dup classDup = new Dup(); System.out.println(<span style=" color: #F00;">classDup.methodDup</span>());</p><p style="text-indent: 0pt;text-align: left;"/><p class="s58" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Semantic Conflict</p><p style="text-indent: 0pt;text-align: left;"/><p class="s59" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Depends on  Contains class</p><p style="text-indent: 0pt;text-align: left;"/><p class="s66" style="padding-left: 14pt;text-indent: 0pt;line-height: 4pt;text-align: left;">lib.Dup</p><p class="s67" style="text-indent: 0pt;line-height: 4pt;text-align: left;">public</p><p style="text-indent: 0pt;text-align: left;"/><p class="s67" style="text-indent: 0pt;text-align: left;">class <span style=" color: #F00;">Dup </span>{</p><p style="text-indent: 0pt;text-align: left;"/><p class="s60" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Module <span style=" color: #548235;">mod</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s60" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Dependency <span style=" color: #548235;">lib1</span></p><p class="s59" style="padding-top: 1pt;padding-left: 26pt;text-indent: 0pt;text-align: left;">Contains class <span class="s67">}</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s67" style="padding-left: 6pt;text-indent: -6pt;line-height: 111%;text-align: left;">String <span style=" color: #F00;">methodDup(){ </span>return <span style=" color: #F00;">“Lib1”</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s67" style="text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"/><p class="s60" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Dependency <span style=" color: #548235;">lib2</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s67" style="padding-left: 5pt;text-indent: -4pt;line-height: 109%;text-align: left;">public class <span style=" color: #F00;">Dup </span>{ String <span style=" color: #F00;">methodDup(){</span></p><p class="s67" style="padding-left: 12pt;text-indent: 0pt;text-align: left;">return <span style=" color: #F00;">“Lib2”</span></p><p class="s67" style="padding-left: 3pt;text-indent: 0pt;text-align: left;">}</p><p class="s67" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"/><p class="s66" style="padding-top: 1pt;padding-left: 15pt;text-indent: 0pt;line-height: 4pt;text-align: left;">lib.Dup</p><p style="text-indent: 0pt;text-align: left;"/><p class="s67" style="padding-left: 1pt;text-indent: 0pt;line-height: 109%;text-align: left;">import lib.Dup; public class RunDup {</p><p class="s67" style="padding-left: 10pt;text-indent: -4pt;line-height: 113%;text-align: left;">public void <span style=" color: #F00;">runMtdLib</span>(){ Dup classDup = new Dup(); classDup.<span style=" color: #F00;">methodLib2</span>();</p><p class="s67" style="padding-left: 3pt;text-indent: 0pt;text-align: left;">}</p><p class="s67" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"/><div class="textbox" style="border:0.5pt solid #000000;display:block;min-height:5.7pt;width:67.8pt;"><p class="s68" style="padding-left: 22pt;text-indent: 0pt;text-align: left;">lib.RunDup</p></div></li></ol><p style="text-indent: 0pt;text-align: left;"/><p class="s59" style="text-indent: 0pt;line-height: 5pt;text-align: left;">Contains class</p><p style="text-indent: 0pt;text-align: left;"/><p class="s59" style="text-indent: 0pt;line-height: 5pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"/><p class="s59" style="text-indent: 0pt;line-height: 5pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"/><p class="s59" style="text-indent: 0pt;line-height: 5pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"/><table style="border-collapse:collapse;margin-left:3pt" cellspacing="0"><tr style="height:4pt"><td style="width:47pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s68" style="padding-right: 2pt;text-indent: 0pt;line-height: 3pt;text-align: center;">lib.Dup</p></td></tr><tr style="height:13pt"><td style="width:47pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s69" style="padding-left: 6pt;text-indent: -4pt;line-height: 111%;text-align: left;">public class <span style=" color: #F00;">Dup </span>{ void <span style=" color: #F00;">methodLib1();</span></p><p class="s69" style="padding-left: 2pt;text-indent: 0pt;line-height: 3pt;text-align: left;">}</p></td></tr><tr style="height:5pt"><td style="width:47pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s68" style="padding-right: 2pt;text-indent: 0pt;line-height: 3pt;text-align: center;">lib.Dup</p></td></tr><tr style="height:13pt"><td style="width:47pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s69" style="padding-left: 6pt;text-indent: -4pt;line-height: 111%;text-align: left;">public class <span style=" color: #F00;">Dup </span>{ void <span style=" color: #F00;">methodLib2();</span></p><p class="s69" style="padding-left: 2pt;text-indent: 0pt;line-height: 2pt;text-align: left;">}</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"/><table style="border-collapse:collapse;margin-left:3pt" cellspacing="0"><tr style="height:4pt"><td style="width:47pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s68" style="padding-right: 2pt;text-indent: 0pt;line-height: 3pt;text-align: center;">lib.Dup</p></td></tr><tr style="height:13pt"><td style="width:47pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s69" style="padding-left: 6pt;text-indent: -4pt;line-height: 111%;text-align: left;">public class <span style=" color: #F00;">Dup </span>{ void <span style=" color: #F00;">methodLib1();</span></p><p class="s69" style="padding-left: 2pt;text-indent: 0pt;line-height: 3pt;text-align: left;">}</p></td></tr><tr style="height:5pt"><td style="width:47pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s68" style="padding-right: 2pt;text-indent: 0pt;line-height: 3pt;text-align: center;">lib.Dup</p></td></tr><tr style="height:13pt"><td style="width:47pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s69" style="padding-left: 6pt;text-indent: -4pt;line-height: 111%;text-align: left;">public class <span style=" color: #F00;">Dup </span>{ void <span style=" color: #F00;">methodLib2();</span></p><p class="s69" style="padding-left: 2pt;text-indent: 0pt;line-height: 2pt;text-align: left;">}</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"/><table style="border-collapse:collapse;margin-left:3pt" cellspacing="0"><tr style="height:69pt"><td style="width:188pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F" colspan="5"><p class="s70" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">(a) Hazard 1  <span class="s71">import mod.Dup</span></p><p class="s71" style="padding-top: 3pt;padding-left: 54pt;padding-right: 17pt;text-indent: -22pt;line-height: 85%;text-align: left;"><span class="s72">Executes </span>Dup classDup = new Dup(); classDup.<span style=" color: #F00;">methodLib</span>();   <span class="s73">Build Error</span></p><p class="s74" style="padding-top: 2pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s75" style="padding-left: 33pt;padding-right: 81pt;text-indent: -14pt;line-height: 82%;text-align: left;">Module <span style=" color: #548235;">mod  </span>Dependency <span style=" color: #548235;">lib </span><span style=" color: #1F4E79;">Contains class  Contains class</span></p><p class="s68" style="padding-top: 1pt;padding-left: 27pt;text-indent: 0pt;text-align: left;">mod.Dup    mod.Dup</p><p class="s69" style="padding-left: 18pt;padding-right: 81pt;text-indent: -4pt;line-height: 109%;text-align: left;">public class <span style=" color: #F00;">Dup </span>{ public class <span style=" color: #F00;">Dup </span>{ void <span style=" color: #F00;">methodHost(); </span>void <span style=" color: #F00;">methodLib();</span></p><p class="s69" style="padding-left: 14pt;text-indent: 0pt;line-height: 4pt;text-align: left;">}      }</p></td></tr><tr style="height:66pt"><td style="width:188pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F" colspan="5"><p class="s70" style="padding-top: 1pt;padding-left: 2pt;text-indent: 0pt;line-height: 59%;text-align: left;">(b) Hazard 3  <span class="s71">import mod.RunDup</span></p><p class="s78" style="padding-left: 50pt;padding-right: 17pt;text-indent: -21pt;line-height: 67%;text-align: left;"><span class="s77">Executes </span><span class="s71">RunDup runner = new RunDup(); </span>runner.<span style=" color: #F00;">runMtdLib</span>();   <span class="s73">Runtime Error</span></p><p class="s80" style="padding-top: 4pt;padding-left: 38pt;text-indent: 0pt;text-align: left;">Depends on   <span class="s81">Contains class    </span><span class="s68">lib.RunDup</span></p><p class="s69" style="padding-left: 115pt;padding-right: 23pt;text-indent: 0pt;line-height: 4pt;text-align: left;">import mod.Dup; public class RunDup {</p><p class="s75" style="padding-left: 15pt;text-indent: 0pt;line-height: 4pt;text-align: left;">Module <span style=" color: #548235;">mod   </span>Dependency <span style=" color: #548235;">lib     </span><span class="s69">public void runMtdLib(){</span></p><p class="s82" style="padding-left: 24pt;text-indent: 5pt;line-height: 5pt;text-align: left;"><span class="s74">Contains class  Contains class   </span><span class="s69">Dup classDup = new Dup(); </span><span class="s68">mod.Dup     mod.Dup     </span>classDup.<span style=" color: #F00;">methodLib</span>();</p><p class="s69" style="padding-left: 15pt;padding-right: 64pt;text-indent: -4pt;line-height: 87%;text-align: left;">public class <span style=" color: #F00;">Dup </span>{  public class <span style=" color: #F00;">Dup </span>{  <span class="s82">} </span>void <span style=" color: #F00;">methodHost();  </span>void <span style=" color: #F00;">methodLib();  </span><span class="s82">}</span></p><p class="s69" style="padding-left: 11pt;text-indent: 0pt;text-align: left;">}      }</p></td></tr><tr style="height:52pt"><td style="width:188pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F" colspan="5"><p class="s84" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">(c) Hazard 4  <span class="s71">import mod.Dup</span></p><p class="s71" style="padding-top: 3pt;padding-left: 56pt;text-indent: -21pt;line-height: 76%;text-align: left;"><span class="s85">Executes </span>Dup classDup = new Dup(); System.out.println(<span style=" color: #F00;">classDup.methodDup</span>());</p><p class="s74" style="padding-top: 4pt;padding-left: 44pt;text-indent: 0pt;text-align: left;">Depends on</p><p class="s73" style="padding-top: 2pt;padding-left: 126pt;text-indent: 0pt;text-align: left;">Semantic Conflict</p><p class="s75" style="padding-top: 1pt;padding-left: 33pt;padding-right: 78pt;text-indent: -11pt;line-height: 82%;text-align: left;">Module <span style=" color: #548235;">mod    </span>Dependency <span style=" color: #548235;">lib </span><span><img width="4" height="7" alt="image" src="DS-附录-中国科学-3_files/Image_036.png"/></span><span style=" color: #1F4E79;">Contains class  </span><span><img width="4" height="7" alt="image" src="DS-附录-中国科学-3_files/Image_037.png"/></span><span style=" color: #1F4E79;">Contains class</span></p></td></tr><tr style="height:5pt"><td style="width:6pt;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:solid;border-right-width:1pt" rowspan="2"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:57pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s68" style="padding-right: 1pt;text-indent: 0pt;line-height: 3pt;text-align: center;">mod.Dup</p></td><td style="width:6pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:solid;border-right-width:1pt" rowspan="2"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:57pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s68" style="padding-right: 1pt;text-indent: 0pt;line-height: 3pt;text-align: center;">mod.Dup</p></td><td style="width:62pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F" rowspan="2"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:24pt"><td style="width:57pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:solid;border-right-width:1pt"><p class="s69" style="padding-top: 1pt;padding-left: 6pt;padding-right: 3pt;text-indent: -4pt;line-height: 109%;text-align: left;">public class <span style=" color: #F00;">Dup </span>{ String <span style=" color: #F00;">methodDup(){</span></p><p class="s69" style="padding-left: 12pt;text-indent: 0pt;text-align: left;">return “<span style=" color: #F00;">Module</span>”</p><p class="s69" style="padding-left: 3pt;text-indent: 0pt;text-align: left;">}</p><p class="s69" style="padding-left: 1pt;text-indent: 0pt;line-height: 3pt;text-align: left;">}</p></td><td style="width:57pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:solid;border-right-width:1pt"><p class="s69" style="padding-top: 1pt;padding-left: 6pt;padding-right: 3pt;text-indent: -4pt;line-height: 109%;text-align: left;">public class <span style=" color: #F00;">Dup </span>{ String <span style=" color: #F00;">methodDup(){</span></p><p class="s69" style="padding-left: 12pt;text-indent: 0pt;text-align: left;">return “<span style=" color: #F00;">Lib</span>”</p><p class="s69" style="padding-left: 4pt;text-indent: 0pt;text-align: left;">}</p><p class="s69" style="padding-left: 1pt;text-indent: 0pt;line-height: 3pt;text-align: left;">}</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="12" height="11" alt="image" src="DS-附录-中国科学-3_files/Image_038.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="12" height="11" alt="image" src="DS-附录-中国科学-3_files/Image_039.png"/></span></p><p class="s44" style="padding-top: 3pt;padding-left: 6pt;text-indent: 27pt;line-height: 108%;text-align: left;"><a name="bookmark4">&zwnj;</a><span class="p">图 </span><span class="h2">A3 </span>异味 <span class="h1">1.1 </span>可能危害与对应触发场景 <span class="h2">Figure A3 </span><span class="s4">Possible Hazards and Triggering Scenarios of Smell 1.1.</span></p><p style="padding-top: 1pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s44" style="padding-left: 31pt;text-indent: 0pt;text-align: left;"><span class="p">图 </span><span class="h2">A4 </span>异味 <span class="h1">1.2 </span>可能危害与对应触发场景</p><h2 style="padding-left: 1pt;text-indent: 0pt;line-height: 115%;text-align: left;">Figure A4 <span class="s4">Possible Hazards and Triggering Scenarios of Smell 1.2.</span></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 86%;text-align: justify;">methodLib2<span class="p">，模块可以正常进行构建。但在运行时，</span>JVM <span class="p">会忽略 </span>lib2 <span class="p">中的类 </span>Dup<span class="p">，因此在运行时则无法找到 </span>lib <span class="p">对应方法，导致运行时错误。</span></p><ol id="l7"><li data-list-text="c."><p class="s4" style="padding-left: 30pt;text-indent: -9pt;line-height: 86%;text-align: justify;"><a href="#bookmark5" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">运行时语义冲突：其触发场景为模块运行时调用了冲突类中签名相同但实现不同的方法。以图</a>A6(c) <span class="p">为例，模块 </span>mod <span class="p">的依赖库 </span>lib1<span class="p">和 </span>lib2 <span class="p">中存在冲突类 </span>Dup <span class="p">和同签名方法 </span>methodLib<span class="p">，但其具体实现不同。当 </span>mod <span class="p">调用 </span>methodLib <span class="p">时就会出现语义冲突，预期调用的是 </span>lib2 <span class="p">中的 </span>Dup <span class="p">类，对应的 </span>methodDup <span class="p">返回</span>”lib2”<span class="p">，而实际调用的是 </span>lib1 <span class="p">中的 </span>Dup <span class="p">类，对应的 </span>methodDup <span class="p">返回</span>”lib1”<span class="p">。</span></p></li></ol><h2 style="padding-left: 20pt;text-indent: 0pt;line-height: 13pt;text-align: left;">(1.3) <span class="p">库版本冲突</span></h2><p style="padding-left: 5pt;text-indent: 15pt;line-height: 86%;text-align: left;">库版本冲突可能引发一系列严重的后果，包括但不限于模块构建失败、运行时错误以及运行时语义冲突。以下将详细阐述这些危害的具体触发场景。</p><ol id="l8"><li data-list-text="a."><p class="s4" style="padding-left: 30pt;text-indent: -9pt;line-height: 86%;text-align: justify;"><a href="#bookmark5" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">构建失败：其触发场景为模块源码中调用了仅存在于被遮蔽的库中的特性（例如方法）。以图</a>A5(a) <span class="p">为例，模块 </span>mod <span class="p">的依赖树中同时存在 </span>lib1 <span class="p">的 </span>1.0.0 <span class="p">和 </span>2.0.0 <span class="p">版本。根据 </span>Maven <span class="p">和 </span>Gradle <span class="p">的版本冲突解决机制，最终 </span>1.0.0 <span class="p">版本会被遮蔽，但 </span>mod <span class="p">在源码中试图调用仅存在于 </span>1.0.0 <span class="p">版本中的方法 </span>methodV1<span class="p">，这导致模块构建失败。</span></p></li><li data-list-text="b."><p class="s4" style="padding-left: 31pt;text-indent: -10pt;line-height: 86%;text-align: left;"><a href="#bookmark5" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">运行时错误：其触发场景为模块运行时调用了仅存在于被遮蔽的库中的特性。以图</a>A5(b) <span class="p">为例，模块 </span>mod <span class="p">直接依赖于 </span>lib1:2.0.0 <span class="p">和 </span>lib2<span class="p">，</span>lib2 <span class="p">又依赖于 </span>lib1:1.0.0<span class="p">，并且在 </span>runMtdLib <span class="p">中调用了仅存在于 </span>lib1:1.0.0 <span class="p">中的方法 </span>methodV1<span class="p">。当 </span>mod <span class="p">试图调用 </span>runMtdLib <span class="p">时，由于 </span>lib1:1.0.0 <span class="p">被遮蔽，最终出现运行时错误。</span></p></li><li data-list-text="c."><p class="s4" style="padding-left: 31pt;text-indent: -10pt;line-height: 86%;text-align: justify;"><a href="#bookmark5" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">运行时语义冲突：其触发场景为模块运行时调用了被遮蔽库中签名相同但实现不同的方法。以图</a>A5(c) <span class="p">为例，模块 </span>mod <span class="p">的依赖树中同时存在 </span>lib1 <span class="p">的 </span>1.0.0 <span class="p">和 </span>2.0.0 <span class="p">版本，两个版本的 </span>lib1 <span class="p">中都包含签名相同的 </span>methodDup <span class="p">方法，但其具体实现不同。当 </span>mod <span class="p">调用 </span>methodDup <span class="p">时就会出现语义冲突，预期调用的是 </span>2.0.0 <span class="p">版本中的 </span>methodDup<span class="p">，应返回</span>”V2”<span class="p">，而实际调用的是 </span>1.0.0 <span class="p">版本中的方法，返回的是</span>”V1”<span class="p">。</span></p></li></ol><h2 style="padding-left: 20pt;text-indent: 0pt;line-height: 13pt;text-align: left;">(1.4) <span class="p">未声明依赖</span></h2><p style="padding-left: 5pt;text-indent: 15pt;line-height: 86%;text-align: left;">未声明依赖可能引发一系列严重的后果，包括但不限于模块构建失败、运行时错误以及运行时语义冲突。以下将详细阐述这些危害的具体触发场景。</p><ol id="l9"><li data-list-text="a."><p style="padding-left: 30pt;text-indent: -9pt;line-height: 86%;text-align: left;">构建失败：其触发场景为模块源码中使用但未声明的依赖库未在依赖树中出现。以图<span class="h2">??</span><span class="s4">(a) </span>为例，模块 <span class="s4">mod </span>中引用依赖库 <span class="s4">lib2 </span>中的类 <span class="s4">A</span>，但并未在配置文件中声明 <span class="s4">lib2</span>，而是通过依赖库 <span class="s4">lib1:4.0.0 </span>引入 <span class="s4">lib2 </span>作为传递依赖。然而 <span class="s4">lib1 </span>升级到 <span class="s4">4.0.1 </span>后不再依赖于 <span class="s4">lib2</span>， <span class="s4">mod </span>的依赖树中不再存在 <span class="s4">lib2</span>，无法找到对应类，导致构建失败。</p></li><li data-list-text="b."><p style="padding-left: 31pt;text-indent: -10pt;line-height: 13pt;text-align: left;">运行时错误：其触发场景为模块运行时使用但未声明的依赖库未在依赖树中出现。以图<span class="h2">??</span><span class="s4">(b) </span>为例，<span class="s4">mod </span>利用反射特性引用依赖库</p><p style="padding-top: 11pt;text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse" cellspacing="0"><tr style="height:59pt"><td style="width:205pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p class="s70" style="padding-left: 2pt;text-indent: 0pt;line-height: 53%;text-align: left;"><a name="bookmark5">&zwnj;</a>(a) Hazard 1  <span class="s71">import lib1.Dup</span></p><p class="s86" style="padding-top: 4pt;padding-right: 67pt;text-indent: 0pt;line-height: 5pt;text-align: center;">Contains <span class="s71">Dup classDup = new Dup();</span></p><p class="s71" style="padding-left: 46pt;text-indent: 0pt;line-height: 78%;text-align: left;">classDup.<span style=" color: #F00;">methodV1</span>();          <span class="s87">Build Error</span></p><p class="s88" style="padding-left: 3pt;padding-right: 67pt;text-indent: 0pt;line-height: 6pt;text-align: center;">Depends on  <span class="s89">Contains class</span></p><p class="s90" style="padding-top: 5pt;padding-left: 50pt;text-indent: 0pt;line-height: 5pt;text-align: left;">Dependency <span style=" color: #548235;">lib1:</span><span style=" color: #F00;">v2.0.0</span></p><p class="s93" style="padding-left: 12pt;text-indent: 0pt;line-height: 8pt;text-align: left;">Module <span style=" color: #548235;">mod      </span><span class="s89">Depends on   Contains class</span></p><p class="s90" style="padding-top: 6pt;padding-left: 50pt;text-indent: 0pt;line-height: 5pt;text-align: left;">Dependency <span style=" color: #548235;">lib2 </span>Dependency <span style=" color: #548235;">lib1:</span><span style=" color: #F00;">v1.0.0</span></p></td></tr><tr style="height:94pt"><td style="width:205pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p class="s70" style="padding-left: 2pt;text-indent: 0pt;line-height: 42%;text-align: left;">(b) Hazard 3 <span class="s71">import lib1.RunDup</span></p><p class="s71" style="padding-left: 38pt;text-indent: 0pt;line-height: 4pt;text-align: left;">RunDup runner = new RunDup();</p><p class="s71" style="padding-left: 16pt;text-indent: 0pt;line-height: 5pt;text-align: left;"><span class="s95">Contains </span>runner.<span style=" color: #F00;">runMtdLib</span>();</p><p class="s92" style="padding-left: 170pt;text-indent: 0pt;line-height: 5pt;text-align: left;">Runtime Error</p><p class="s88" style="padding-left: 24pt;text-indent: 0pt;text-align: left;">Depends on  <span class="s89">Contains class</span></p><p class="s90" style="padding-top: 6pt;padding-left: 42pt;text-indent: 0pt;line-height: 5pt;text-align: left;">Dependency <span style=" color: #548235;">lib1:</span><span style=" color: #F00;">v2.0.0</span></p><p class="s93" style="padding-left: 3pt;text-indent: 0pt;line-height: 8pt;text-align: left;">Module <span style=" color: #548235;">mod      </span><span class="s89">Depends on   Contains class</span></p><p class="s90" style="padding-top: 6pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">Dependency <span style=" color: #548235;">lib2 </span>Dependency <span style=" color: #548235;">lib1:</span><span style=" color: #F00;">v1.0.0</span></p><p class="s68" style="padding-left: 98pt;padding-right: 57pt;text-indent: 19pt;line-height: 110%;text-align: left;">lib2.RunDup <span style=" color: #000;">import lib1.Dup; public class RunDup {</span></p><p class="s69" style="padding-left: 109pt;padding-right: 37pt;text-indent: -6pt;line-height: 112%;text-align: left;">public void <span style=" color: #F00;">runMtdLib</span>(){ <span style=" color: #595959;">Dup classDup = new Dup(); classDup.</span><span style=" color: #F00;">methodV1</span><span style=" color: #595959;">();</span></p><p class="s69" style="padding-left: 100pt;text-indent: 0pt;text-align: left;">}</p><p class="s69" style="padding-left: 98pt;text-indent: 0pt;text-align: left;">}</p></td></tr><tr style="height:105pt"><td style="width:205pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p class="s71" style="padding-left: 36pt;text-indent: 0pt;line-height: 5pt;text-align: left;">import lib2.RunDup</p><p class="s97" style="padding-left: 2pt;text-indent: 0pt;line-height: 6pt;text-align: left;">(c) Hazard 4 <span class="s71">RunDup runner = new RunDup();</span></p><p class="s71" style="padding-left: 16pt;text-indent: 0pt;line-height: 68%;text-align: left;"><span class="s98">Contains </span>System.out.println(runner.<span style=" color: #F00;">runDupMtd</span>());</p><p class="s99" style="padding-left: 117pt;text-indent: 0pt;line-height: 5pt;text-align: left;">lib1.Dup   <span class="s92">Semantic Conflict</span></p><p class="s69" style="padding-left: 104pt;text-indent: 0pt;line-height: 2pt;text-align: left;">public class <span style=" color: #F00;">Dup </span>{</p><p class="s89" style="padding-left: 24pt;text-indent: 0pt;line-height: 5pt;text-align: left;">Depends on    Contains class  <span class="s82">String </span><span class="s83">methodDup(){</span></p><p class="s69" style="padding-left: 115pt;text-indent: 0pt;line-height: 4pt;text-align: left;">return <span style=" color: #F00;">“V2”</span></p><p class="s69" style="padding-left: 106pt;text-indent: 0pt;line-height: 3pt;text-align: left;">}</p><p class="s90" style="padding-left: 42pt;text-indent: 0pt;line-height: 4pt;text-align: left;">Dependency <span style=" color: #548235;">lib1:</span><span style=" color: #F00;">v2.0.0  </span><span class="s69">}</span></p><p class="s69" style="padding-top: 1pt;padding-left: 139pt;padding-right: 21pt;text-indent: -135pt;line-height: 40%;text-align: left;"><span class="s93">Module </span><span class="s94">mod       </span><span class="s89">Depends on   Contains class   </span><span class="s99">lib1.Dup </span>public class <span style=" color: #F00;">Dup </span>{</p><p class="s69" style="padding-left: 143pt;text-indent: 0pt;text-align: left;">String <span style=" color: #F00;">methodDup(){</span></p><p class="s90" style="padding-left: 42pt;text-indent: 0pt;line-height: 5pt;text-align: left;">Dependency <span style=" color: #548235;">lib2 </span>Dependency <span style=" color: #548235;">lib1:</span><span style=" color: #F00;">v1.0.0    </span><span class="s100">return </span><span class="s99">“V1”</span></p><p class="s69" style="padding-left: 141pt;text-indent: 0pt;line-height: 3pt;text-align: left;">}</p><p class="s69" style="padding-left: 139pt;text-indent: 0pt;text-align: left;">}</p><p class="s68" style="padding-top: 1pt;padding-left: 136pt;text-indent: 0pt;text-align: left;">lib2.RunDup</p><p class="s69" style="padding-left: 98pt;padding-right: 57pt;text-indent: 0pt;line-height: 107%;text-align: left;">import lib1.Dup; public class RunDup {</p><p class="s69" style="padding-left: 109pt;padding-right: 33pt;text-indent: -6pt;line-height: 112%;text-align: left;">public String <span style=" color: #F00;">runDupMtd</span>(){ Dup classDup = new Dup(); return classDup.<span style=" color: #F00;">methodDup()</span></p><p class="s69" style="padding-left: 102pt;text-indent: 0pt;text-align: left;">}</p><p class="s69" style="padding-left: 98pt;text-indent: 0pt;line-height: 4pt;text-align: left;">}</p></td></tr></table><table style="border-collapse:collapse" cellspacing="0"><tr style="height:12pt"><td style="width:235pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p class="s91" style="padding-top: 5pt;padding-left: 14pt;text-indent: 0pt;line-height: 5pt;text-align: left;"><span class="s100">import lib2.A   </span>mod <span style=" color: #F00;">uses transitive dependency </span>lib2 <span style=" color: #F00;">directly</span></p></td></tr><tr style="height:7pt"><td style="width:235pt;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p class="s68" style="padding-left: 14pt;text-indent: 0pt;line-height: 6pt;text-align: left;">A classA = new A();   <span class="s92">without declaration in pom.xml!            </span><span class="s101">Build Error</span></p></td></tr><tr style="height:8pt"><td style="width:235pt;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p class="s89" style="padding-left: 18pt;text-indent: 0pt;text-align: left;">Contains code</p></td></tr><tr style="height:6pt"><td style="width:235pt;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p class="s89" style="padding-left: 26pt;text-indent: 0pt;line-height: 5pt;text-align: left;">Depends on   Depends on   Contains class   <span class="s102">lib2.A</span></p></td></tr><tr style="height:3pt"><td style="width:235pt;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:6pt"><td style="width:235pt;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p class="s69" style="padding-right: 70pt;text-indent: 0pt;text-align: right;">...</p></td></tr><tr style="height:15pt"><td style="width:235pt;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p class="s90" style="padding-left: 9pt;text-indent: 0pt;line-height: 6pt;text-align: left;">Module <span style=" color: #548235;">mod </span>Dependency <span style=" color: #548235;">lib1:</span><span style=" color: #F00;">v4.0.0 </span>Dependency <span style=" color: #548235;">lib2    </span><span class="s103">}</span></p><p class="s91" style="padding-left: 30pt;text-indent: 0pt;line-height: 7pt;text-align: left;"><span class="s104">If upgraded               </span>mod <span style=" color: #F00;">cannot access </span>lib2</p></td></tr><tr style="height:19pt"><td style="width:235pt;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p class="s92" style="padding-left: 150pt;text-indent: 0pt;text-align: left;">due to <span style=" color: #548235;">lib1 </span>upgrade</p><p class="s105" style="padding-top: 4pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">(a) Hazard 1 <span class="s90">Dependency </span><span class="s91">lib1:</span><span class="s92">v4.0.1</span></p></td></tr><tr style="height:72pt"><td style="width:235pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s91" style="padding-left: 3pt;text-indent: 0pt;line-height: 70%;text-align: left;"><span class="s68">Class c = Class.forName(“lib2.A”); </span>mod <span style=" color: #F00;">uses transitive dependency </span>lib2 <span style=" color: #F00;">directly     </span><span class="s87">Runtime Error</span></p><p class="s92" style="padding-left: 12pt;text-indent: 0pt;line-height: 4pt;text-align: center;">without declaration in pom.xml!</p><p class="s89" style="padding-left: 12pt;padding-right: 180pt;text-indent: 0pt;text-align: center;">Contains code</p><p class="s89" style="padding-left: 26pt;text-indent: 0pt;line-height: 7pt;text-align: left;">Depends on   Depends on   <span class="s106">Contains class   </span><span class="s103">lib2.A</span></p><p class="s69" style="padding-left: 144pt;text-indent: 0pt;line-height: 3pt;text-align: left;">public class A {</p><p class="s69" style="padding-left: 155pt;text-indent: 0pt;text-align: left;">...</p><p class="s90" style="padding-left: 9pt;text-indent: 0pt;text-align: left;">Module <span style=" color: #548235;">mod </span>Dependency <span style=" color: #548235;">lib1:</span><span style=" color: #F00;">v4.0.0 </span>Dependency <span style=" color: #548235;">lib2    </span><span class="s100">}</span></p><p class="s91" style="padding-left: 30pt;text-indent: 0pt;text-align: left;"><span class="s104">If upgraded               </span>mod <span style=" color: #F00;">cannot access </span>lib2</p><p class="s92" style="padding-left: 150pt;text-indent: 0pt;text-align: left;">due to <span style=" color: #548235;">lib1 </span>upgrade</p><p class="s107" style="padding-top: 2pt;padding-left: 3pt;text-indent: 0pt;line-height: 8pt;text-align: left;">(b) Hazard 3 <span class="s90">Dependency </span><span class="s91">lib1:</span><span class="s92">v4.0.1</span></p></td></tr><tr style="height:85pt"><td style="width:235pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p class="s69" style="padding-top: 1pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">import lib2.A</p><p class="s91" style="padding-right: 66pt;text-indent: 0pt;line-height: 5pt;text-align: right;">mod <span style=" color: #F00;">uses transitive dependency </span>lib2 <span style=" color: #F00;">directly</span></p><p class="s103" style="padding-left: 3pt;text-indent: 0pt;line-height: 5pt;text-align: left;">A class A = new A();      <span class="s92">without declaration in pom.xml!       Semantic Conflict</span></p><p class="s69" style="padding-left: 3pt;text-indent: 0pt;line-height: 3pt;text-align: left;">String <span style=" color: #F00;">lib2Ver </span>= <span style=" color: #F00;">A.getVersion();</span></p><p class="s89" style="padding-right: 62pt;text-indent: 0pt;line-height: 5pt;text-align: right;">Contains code                   <span class="s68">Lib2.A</span></p><p class="s69" style="padding-left: 142pt;text-indent: 0pt;line-height: 3pt;text-align: left;">public class <span style=" color: #F00;">A </span>{</p><p class="s69" style="padding-left: 26pt;text-indent: 0pt;line-height: 6pt;text-align: left;"><span class="s88">Depends on   Depends on   </span><span class="s89">Contains class  </span>String <span style=" color: #F00;">getVersion()</span>{</p><p class="s69" style="padding-left: 97pt;text-indent: 0pt;line-height: 4pt;text-align: center;">return <span style=" color: #F00;">“V1”</span></p><p class="s69" style="padding-left: 144pt;text-indent: 0pt;line-height: 3pt;text-align: left;">}</p><p class="s90" style="padding-right: 89pt;text-indent: 0pt;line-height: 5pt;text-align: right;">Module <span style=" color: #548235;">mod </span>Dependency <span style=" color: #548235;">lib1:</span><span style=" color: #F00;">v4.0.0 </span>Dependency <span style=" color: #548235;">lib2:</span><span style=" color: #F00;">v1.0.0  </span><span class="s69">}</span></p><p class="s92" style="padding-left: 30pt;text-indent: 0pt;line-height: 92%;text-align: left;">If upgraded                 <span class="s108">Lib2.A</span></p><p class="s69" style="padding-left: 68pt;text-indent: 0pt;line-height: 60%;text-align: left;"><span class="s109">Depends on  </span><span class="s110">Contains class </span>public class <span style=" color: #F00;">A </span>{</p><p class="s69" style="padding-left: 146pt;text-indent: 0pt;line-height: 2pt;text-align: left;">String <span style=" color: #F00;">getVersion()</span>{</p><p class="s69" style="padding-left: 97pt;text-indent: 0pt;text-align: center;">return <span style=" color: #F00;">“V2”</span></p><p class="s111" style="padding-right: 87pt;text-indent: 0pt;line-height: 5pt;text-align: right;">Dependency <span style=" color: #548235;">lib1:</span><span style=" color: #F00;">v4.0.1 </span><span class="s90">Dependency </span><span class="s91">lib2:</span><span class="s92">v2.0.0  </span><span class="s100">}</span></p><p class="s69" style="padding-left: 142pt;text-indent: 0pt;line-height: 3pt;text-align: left;">}</p><p class="s92" style="padding-top: 2pt;padding-left: 3pt;text-indent: 0pt;line-height: 8pt;text-align: left;"><span class="s107">(c) Hazard 4       </span>lib2 <span style=" color: #548235;">upgrade from </span>v1.0.0 <span style=" color: #548235;">to </span>v2.0.0</p></td></tr></table><p style="padding-left: 16pt;text-indent: 0pt;text-align: left;"><span style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt;">	</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="173" height="53" alt="image" src="DS-附录-中国科学-3_files/Image_040.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="51" height="29" alt="image" src="DS-附录-中国科学-3_files/Image_041.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="174" height="53" alt="image" src="DS-附录-中国科学-3_files/Image_042.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="53" height="29" alt="image" src="DS-附录-中国科学-3_files/Image_043.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="129" height="51" alt="image" src="DS-附录-中国科学-3_files/Image_044.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="258" height="119" alt="image" src="DS-附录-中国科学-3_files/Image_045.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="63" height="29" alt="image" src="DS-附录-中国科学-3_files/Image_046.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="240" height="66" alt="image" src="DS-附录-中国科学-3_files/Image_047.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="44" height="29" alt="image" src="DS-附录-中国科学-3_files/Image_048.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="236" height="65" alt="image" src="DS-附录-中国科学-3_files/Image_049.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="52" height="29" alt="image" src="DS-附录-中国科学-3_files/Image_050.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="304" height="105" alt="image" src="DS-附录-中国科学-3_files/Image_051.png"/></span></p><p class="s113" style="text-indent: 0pt;line-height: 5pt;text-align: left;">Contains class</p><p style="text-indent: 0pt;text-align: left;"/><p class="s113" style="text-indent: 0pt;line-height: 5pt;text-align: left;">Contains class</p><p style="text-indent: 0pt;text-align: left;"/><p class="s113" style="text-indent: 0pt;line-height: 5pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"/><p class="s113" style="text-indent: 0pt;line-height: 5pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"/><p class="s113" style="text-indent: 0pt;line-height: 5pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"/><p class="s114" style="text-indent: 0pt;line-height: 5pt;text-align: left;">No longer</p><p style="text-indent: 0pt;text-align: left;"/><p class="s114" style="text-indent: 0pt;line-height: 5pt;text-align: left;">depends on</p><p style="text-indent: 0pt;text-align: left;"/><p class="s114" style="text-indent: 0pt;line-height: 5pt;text-align: left;">No longer</p><p style="text-indent: 0pt;text-align: left;"/><p class="s114" style="text-indent: 0pt;line-height: 5pt;text-align: left;">depends on</p><p style="text-indent: 0pt;text-align: left;"/><table style="border-collapse:collapse;margin-left:3pt" cellspacing="0"><tr style="height:4pt"><td style="width:47pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s68" style="padding-left: 12pt;text-indent: 0pt;line-height: 3pt;text-align: left;">lib1.Dup</p></td><td style="width:38pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt" rowspan="2"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:14pt"><td style="width:47pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s69" style="padding-left: 6pt;padding-right: 4pt;text-indent: -4pt;line-height: 107%;text-align: left;">public class <span style=" color: #F00;">Dup </span>{ void <span style=" color: #F00;">methodV2();</span></p><p class="s69" style="padding-left: 1pt;text-indent: 0pt;line-height: 3pt;text-align: left;">}</p></td></tr><tr style="height:5pt"><td style="width:38pt;border-top-style:solid;border-top-width:1pt;border-right-style:solid;border-right-width:1pt" rowspan="2"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:47pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s68" style="padding-top: 1pt;padding-left: 12pt;text-indent: 0pt;line-height: 3pt;text-align: left;">lib1.Dup</p></td></tr><tr style="height:13pt"><td style="width:47pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s69" style="padding-left: 6pt;padding-right: 4pt;text-indent: -4pt;line-height: 107%;text-align: left;">public class <span style=" color: #F00;">Dup </span>{ void <span style=" color: #F00;">methodV1();</span></p><p class="s69" style="padding-left: 1pt;text-indent: 0pt;line-height: 2pt;text-align: left;">}</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"/><table style="border-collapse:collapse;margin-left:3pt" cellspacing="0"><tr style="height:4pt"><td style="width:47pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s68" style="padding-left: 12pt;text-indent: 0pt;line-height: 3pt;text-align: left;">lib1.Dup</p></td><td style="width:38pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt" rowspan="2"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:14pt"><td style="width:47pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s69" style="padding-left: 6pt;padding-right: 4pt;text-indent: -4pt;line-height: 107%;text-align: left;">public class <span style=" color: #F00;">Dup </span>{ void <span style=" color: #F00;">methodV2();</span></p><p class="s69" style="padding-left: 1pt;text-indent: 0pt;line-height: 3pt;text-align: left;">}</p></td></tr><tr style="height:5pt"><td style="width:38pt;border-top-style:solid;border-top-width:1pt;border-right-style:solid;border-right-width:1pt" rowspan="2"><p style="text-indent: 0pt;line-height: 8pt;text-align: left;"><span><img width="10" height="11" alt="image" src="DS-附录-中国科学-3_files/Image_052.png"/></span></p></td><td style="width:47pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s68" style="padding-top: 1pt;padding-left: 12pt;text-indent: 0pt;line-height: 3pt;text-align: left;">lib1.Dup</p></td></tr><tr style="height:13pt"><td style="width:47pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s69" style="padding-left: 6pt;padding-right: 4pt;text-indent: -4pt;line-height: 107%;text-align: left;">public class <span style=" color: #F00;">Dup </span>{ void <span style=" color: #F00;">methodV1();</span></p><p class="s69" style="padding-left: 1pt;text-indent: 0pt;line-height: 2pt;text-align: left;">}</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"/><p class="s44" style="padding-left: 31pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><span class="p">图 </span><span class="h2">A5 </span>异味 <span class="h1">1.3 </span>可能危害与对应触发场景</p><p class="s44" style="padding-top: 3pt;text-indent: 0pt;text-align: center;"><span class="p">图 </span><span class="h2">A6 </span>异味 <span class="h1">1.4 </span>可能危害与对应触发场景</p><h2 style="text-indent: 0pt;line-height: 9pt;text-align: center;">Figure A6 <span class="s4">Possible Hazards and Triggering Scenarios of Smell</span></h2><p class="s4" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;line-height: 115%;text-align: left;"><b>Figure A5 </b>Possible Hazards and Triggering Scenarios of <span class="s115">1.4. </span>Smell 1.3.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 86%;text-align: left;">lib2 <span class="p">中的类 </span>A<span class="p">，但并未在配置文件中声明。和上例类似，在 </span>mod <span class="p">依赖树中不存在 </span>lib2 <span class="p">后，由于 </span>mod <span class="p">并未在源码中引入类 </span>A<span class="p">，而是利用反射特性，所以 </span>mod <span class="p">不会出现构建失败，但在运行时则会因为无法找到类 </span>A <span class="p">而出现运行时错误。</span></p></li><li data-list-text="c."><p style="padding-left: 31pt;text-indent: -10pt;line-height: 86%;text-align: left;">运行时语义冲突：其触发场景为模块直接使用但未声明的依赖库版本升级后出现签名相同但实现不同的情况。以图<span class="h2">??</span><span class="s4">(c) </span>为例，模 块 <span class="s4">mod </span>中直接使用 <span class="s4">lib2:1.0.0 </span>中的方法 <span class="s4">getVersion</span>，但并未在配置文件中声明 <span class="s4">lib2</span>，而是通过依赖库 <span class="s4">lib1:4.0.0 </span>引入 <span class="s4">lib2:1.0.0 </span>作为传递依赖。然而 <span class="s4">lib1 </span>升级到 <span class="s4">4.0.1 </span>时同时升级 <span class="s4">lib2 </span>版本，引入传递依赖 <span class="s4">lib2:2.0.0</span>，其中方法 <span class="s4">getVersion </span>的签名并未改变，但其具体实现不同。当 <span class="s4">mod </span>调用 <span class="s4">version </span>时就会出现语义冲突，预期调用的是 <span class="s4">1.0.0 </span>版本中的 <span class="s4">getVersion</span>，应返回<span class="s4">”V1”</span>，而实际调用的是 <span class="s4">2.0.0 </span>版本中的方法，返回的是<span class="s4">”V2”</span>。</p></li></ol><h2 style="padding-left: 20pt;text-indent: 0pt;line-height: 12pt;text-align: left;">(1.5) <span class="p">未使用依赖</span></h2><p style="padding-left: 5pt;text-indent: 15pt;line-height: 86%;text-align: left;">未使用依赖不会如前述异味一般造成构建失败等破坏性的危害，但会造成构建成本增加、构建产物冗余等危害。以下将详细阐述这些危害的具体触发场景。</p><ol id="l10"><li data-list-text="a."><p class="s4" style="padding-left: 30pt;text-indent: -9pt;line-height: 86%;text-align: justify;"><a href="#bookmark6" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">构建成本增加：这类危害在出现依赖未使用时始终存在。以图</a>A7(a) <span class="p">为例，模块 </span>mod <span class="p">并未使用依赖库 </span>lib <span class="p">中的特性，但却在配置文件中进行声明，导致在构建时该依赖会被引入，需要从中央存储仓库获取对应依赖库，进而导致构建时间增加，即增加构建成本。</span></p></li><li data-list-text="b."><p class="s4" style="padding-left: 31pt;text-indent: -10pt;line-height: 86%;text-align: justify;"><span class="p">构建产物冗余：其触发场景为模块可执行 </span>JAR <a href="#bookmark6" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">的打包。以图</a>A7(b) <span class="p">为例，模块 </span>mod <span class="p">并未使用依赖库 </span>lib <span class="p">中的特性，但却在配置文件中进行声明。而 </span>Maven <span class="p">和 </span>Gradle <span class="p">在将 </span>mod <span class="p">打包为可执行 </span>JAR <span class="p">时，所有的依赖库都会被涵盖，包括实际上并未被使用的 </span>lib<span class="p">，导致构建产物冗余。</span></p></li><li data-list-text="c."><p class="s4" style="padding-left: 30pt;text-indent: -9pt;line-height: 86%;text-align: left;"><a href="#bookmark6" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">下游模块构建成本增加：这类危害在出现依赖未使用时始终存在。以图</a>A7(c) <span class="p">为例，模块 </span>mod <span class="p">并未使用依赖库 </span>lib <span class="p">中的特性，但却在配置文件中进行声明。下游模块 </span>client <span class="p">在使用模块 </span>mod <span class="p">的同时，也就引入了 </span>mod <span class="p">的依赖库 </span>lib <span class="p">作为传递依赖，其会在构建时被引入，需要从中央存储仓库获取对应依赖库，进而导致构建时间增加，即增加下游模块 </span>client <span class="p">的构建成本。</span></p></li><li data-list-text="d."><p class="s4" style="padding-left: 31pt;text-indent: -10pt;line-height: 86%;text-align: left;"><span class="p">下游模块构建产物冗余：其触发场景为下游模块可执行 </span>JAR <a href="#bookmark6" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">的打包。以图</a>A7(d) <span class="p">为例，模块 </span>mod <span class="p">并未使用依赖库 </span>lib <span class="p">中的特性，但却在配置文件中进行声明。下游模块 </span>client <span class="p">在使用模块 </span>mod <span class="p">的同时，也引入了 </span>mod <span class="p">的依赖库 </span>lib <span class="p">作为传递依赖，而 </span>Maven <span class="p">和 </span>Gradle<span class="p">在将 </span>client <span class="p">打包为可执行 </span>JAR <span class="p">时，所有直接依赖和传递依赖库都会被包括，导致下游模块 </span>lib <span class="p">构建产物冗余。</span></p></li></ol><h2 style="padding-left: 20pt;text-indent: 0pt;line-height: 13pt;text-align: left;">(1.6) <span class="p">依赖范围误用</span></h2><p style="padding-top: 11pt;text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="368" height="467" alt="image" src="DS-附录-中国科学-3_files/Image_053.png"/></span></p><p class="s116" style="text-indent: 0pt;text-align: left;">Executable artifact</p><p class="s117" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">Includes</p><p style="text-indent: 0pt;text-align: left;"/><p class="s117" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Includes</p><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="text-indent: 0pt;line-height: 7pt;text-align: left;">Module <span style=" color: #548235;">mod </span><span class="s119">Dependency </span><span class="s120">lib</span></p><p style="text-indent: 0pt;text-align: left;"/><h3 style="text-indent: 0pt;line-height: 8pt;text-align: left;">(a) Hazard 2</h3><p class="s42" style="padding-top: 5pt;padding-left: 35pt;text-indent: 0pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"/><p class="s117" style="text-indent: 0pt;line-height: 6pt;text-align: left;">lib1 <span style=" color: #F00;">declared </span><span style=" color: #000;">by </span>mod<span style=" color: #000;">, but </span><span style=" color: #F00;">actually unused</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s43" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Increase Build Cost</p><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Module <span style=" color: #548235;">mod</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s43" style="text-indent: 0pt;line-height: 6pt;text-align: left;">When built</p><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Dependency <span style=" color: #548235;">lib</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="text-indent: 0pt;line-height: 110%;text-align: left;">When building <span style=" color: #548235;">mod, lib1 </span>has to be accessed even if <span style=" color: #F00;">unused</span>, thus <span style=" color: #F00;">increasing build cost</span></p><p style="text-indent: 0pt;text-align: left;"/><h3 style="text-indent: 0pt;line-height: 8pt;text-align: left;">(b) Hazard 5</h3><p style="text-indent: 0pt;text-align: left;"/><p class="s117" style="text-indent: 0pt;line-height: 6pt;text-align: left;">lib1 <span style=" color: #F00;">declared </span><span style=" color: #000;">by </span>mod<span style=" color: #000;">, but </span><span style=" color: #F00;">actually unused</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s42" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"/><p class="s43" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Redundant Artifact</p><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Module <span style=" color: #548235;">mod   </span>Dependency <span style=" color: #548235;">lib</span></p><p class="s43" style="padding-left: 28pt;text-indent: 0pt;line-height: 6pt;text-align: left;">When packaged as excuteble artifact</p><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="text-indent: 0pt;line-height: 110%;text-align: left;">Artifact is <span style=" color: #F00;">redundant </span>because <span style=" color: #548235;">lib1 </span>is included even if <span style=" color: #F00;">unused</span></p><p style="text-indent: 0pt;text-align: left;"/><h3 style="text-indent: 0pt;line-height: 8pt;text-align: left;">(c) Hazard 7</h3><p style="text-indent: 0pt;text-align: left;"/><p class="s117" style="text-indent: 0pt;line-height: 6pt;text-align: left;">lib1 <span style=" color: #F00;">declared </span><span style=" color: #000;">by </span>mod<span style=" color: #000;">, but </span><span style=" color: #F00;">actually unused</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s42" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"/><p class="s42" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="padding-top: 1pt;padding-left: 32pt;text-indent: -32pt;line-height: 77%;text-align: left;">Downstream Module <span style=" color: #548235;">client </span>Module <span style=" color: #548235;">mod </span><span style=" color: #F00;">When built</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Dependency <span style=" color: #548235;">lib</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s43" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Increase Downstream Module Build Cost</p><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="text-indent: 0pt;line-height: 112%;text-align: left;">When building <span style=" color: #548235;">client, lib1 </span>has to be downloaded even if <span style=" color: #F00;">unused</span>, thus <span style=" color: #F00;">increasing build cost</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s117" style="text-indent: 0pt;line-height: 6pt;text-align: left;">lib1 <span style=" color: #F00;">declared </span><span style=" color: #000;">by </span>mod<span style=" color: #000;">, but </span><span style=" color: #F00;">actually unused</span></p><p style="text-indent: 0pt;text-align: left;"/><h3 style="text-indent: 0pt;line-height: 8pt;text-align: left;">(d) Hazard 9</h3><p class="s42" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"/><p class="s42" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"/><p class="s43" style="padding-left: 165pt;text-indent: 0pt;line-height: 6pt;text-align: left;">Downstream Module Redundant Artifact</p><p class="s118" style="padding-left: 20pt;text-indent: -20pt;text-align: left;">Downstream Module <span style=" color: #548235;">client </span>Module <span style=" color: #548235;">mod   </span>Dependency <span style=" color: #548235;">lib </span><span style=" color: #F00;">When packaged as excuteble artifact</span></p><p class="s118" style="padding-left: 142pt;text-indent: 0pt;line-height: 5pt;text-align: left;">Downstream artifact <span style=" color: #F00;">redundant</span></p><p class="s118" style="padding-left: 142pt;text-indent: 0pt;text-align: left;">because <span style=" color: #548235;">mod </span>introduces <span style=" color: #F00;">unused transitive dependency </span><span style=" color: #548235;">lib</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="text-indent: 0pt;line-height: 7pt;text-align: left;">Module <span style=" color: #548235;">client </span>Module <span style=" color: #548235;">mod </span>Dependency <span style=" color: #548235;">lib</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s117" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Includes</p><p style="text-indent: 0pt;text-align: left;"/><p class="s116" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">Executable artifact</p><p class="s117" style="padding-top: 2pt;text-indent: 0pt;text-align: left;">Includes Includes</p><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Dependency <span style=" color: #548235;">lib</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s116" style="text-indent: 0pt;text-align: center;">Build time dependencies</p><p class="s117" style="padding-top: 1pt;padding-left: 1pt;text-indent: 0pt;text-align: center;">Includes</p><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Dependency <span style=" color: #548235;">lib1</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s116" style="text-indent: 0pt;text-align: center;">Build time dependencies</p><p class="s117" style="padding-top: 1pt;padding-left: 1pt;text-indent: 0pt;text-align: center;">Includes</p><p style="text-indent: 0pt;text-align: left;"/><p class="s44" style="text-indent: 0pt;text-align: center;"><a name="bookmark6">&zwnj;</a><span class="p">图 </span><span class="h2">A7 </span>异味 <span class="h1">1.5 </span>可能危害与对应触发场景</p><h2 style="text-indent: 0pt;text-align: center;">Figure A7 <span class="s4">Possible Hazards and Triggering Scenarios of Smell 1.5.</span></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 15pt;line-height: 86%;text-align: justify;"><span class="s4">Maven </span>和 <span class="s4">Gradle </span>有多个不同的依赖范围<span class="s4">, </span>而不同依赖范围之间的误用造成的危害也不尽相同<span class="s4">. </span>因此<span class="s4">, </span>此类异味有大量触发场景和对应的危害<span class="s4">. </span>我们分别选取 <span class="s4">Maven </span>和 <span class="s4">Gradle </span>中主要的依赖范围<span class="s4">, </span>将不同依赖范围之间误用所对应的危害列于表<span class="h2">??</span>和表<span class="h2">??</span>中<span class="s4">, </span>其中表行代表依赖库的预期依赖范围<span class="s4">, </span>表列代表实际依赖范围<span class="s4">, </span>表的内容代表可能的危害<span class="s4">, </span>其对应触发场景即为所在行和列对应依赖范围的误用<span class="s4">.</span></p><ol id="l11"><li data-list-text="a."><p class="s4" style="padding-top: 1pt;padding-left: 30pt;text-indent: -9pt;line-height: 86%;text-align: justify;"><span class="p">构建失败：以预期依赖范围为 </span>compile<span class="p">，实际范围为 </span>test <a href="#bookmark7" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">为例，在图</a>A8(a) <span class="p">中，模块 </span>mod <span class="p">在源码中直接引用 </span>lib <span class="p">中的类 </span>A<span class="p">，因此其预期依赖范围应该是 </span>compile<span class="p">，但其实际依赖范围被设置为 </span>test<span class="p">，代表其只会在测试时出现而不会在构建时出现，这就导致 </span>mod <span class="p">构建时无法找到类 </span>A<span class="p">，最终构建失败。</span></p></li><li data-list-text="b."><p class="s4" style="padding-top: 1pt;padding-left: 30pt;text-indent: -9pt;line-height: 86%;text-align: left;"><span class="p">构建成本增加：以预期范围为 </span>test<span class="p">，实际范围为 </span>compile <a href="#bookmark7" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">为例，在图</a>A8(b) <span class="p">中，模块 </span>mod <span class="p">将直接依赖 </span>lib <span class="p">的依赖范围设置为 </span>compile<span class="p">，代表其在构建、运行和测试时都被使用，但其预期依赖范围是 </span>test<span class="p">，代表其不应该在构建时出现。因此在 </span>mod <span class="p">进行构建时，需要从中央存储仓库获取事实上不必要的 </span>lib<span class="p">，导致构建时间增加，即增加构建成本。</span></p></li></ol><p class="s4" style="padding-top: 1pt;padding-left: 5pt;text-indent: 14pt;line-height: 86%;text-align: justify;">d. <span class="p">构建产物冗余：以预期范围为 </span>test<span class="p">，实际范围为 </span>compile <a href="#bookmark7" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">为例，在图</a>A8(d) <span class="p">中，模块 </span>mod <span class="p">将直接依赖 </span>lib <span class="p">的依赖范围设置为 </span>compile<span class="p">，但其实际上仅在测试时被使用，预期依赖范围应为 </span>test<span class="p">。在 </span>mod <span class="p">打包为可执行 </span>JAR <span class="p">时，所有依赖范围为 </span>compile <span class="p">的依赖库都会被涵盖，而会忽略依赖范围为 </span>test <span class="p">的依赖库，这就导致 </span>lib <span class="p">被错误地包括进构建产物中，最终导致构建产物冗余。</span></p><ol id="l12"><li data-list-text="f."><p class="s4" style="padding-top: 1pt;padding-left: 29pt;text-indent: -8pt;line-height: 86%;text-align: left;"><span class="p">下游模块构建成本增加：以预期依赖范围为 </span>implementation<span class="p">，实际范围为 </span>api <a href="#bookmark8" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">为例，在图</a>A9(b) <span class="p">中，模块 </span>mod <span class="p">将依赖库 </span>lib <span class="p">的依赖范围设置为 </span>api<span class="p">，此范围意味着被下游模块 </span>client <span class="p">在构建时引入 </span>mod <span class="p">就也会同时引入 </span>lib<span class="p">，但 </span>lib <span class="p">仅用于 </span>mod <span class="p">内部实现，其预期范围是 </span>implementation<span class="p">，不应该出现在 </span>client <span class="p">的构建时。因此 </span>client <span class="p">在构建时需要从中央存储仓库获取事实上不必要的 </span>lib<span class="p">，导致构建时间增加，即增加构建成本。</span></p><p style="padding-top: 13pt;text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:80.7563pt" cellspacing="0"><tr style="height:83pt"><td style="width:301pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F" colspan="3"><p style="text-indent: 0pt;text-align: left;"><span><img width="253" height="106" alt="image" src="DS-附录-中国科学-3_files/Image_054.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="23" height="23" alt="image" src="DS-附录-中国科学-3_files/Image_055.png"/></span></p><p class="s5" style="padding-left: 4pt;text-indent: 0pt;line-height: 7pt;text-align: left;"><a name="bookmark7">&zwnj;</a>(a) Hazard 1             <span class="s121">lib.A</span></p><p class="s9" style="padding-left: 39pt;text-indent: 0pt;line-height: 7pt;text-align: left;">Depends on   <span class="s51">Contains class </span><span class="s19">public class A {</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="51" height="33" alt="image" src="DS-附录-中国科学-3_files/Image_056.png"/></span></p><p class="s11" style="padding-left: 30pt;padding-right: 55pt;text-indent: 0pt;line-height: 4pt;text-align: center;">...</p><p class="s11" style="padding-right: 55pt;text-indent: 0pt;text-align: center;">}</p><p class="s7" style="padding-top: 2pt;padding-left: 10pt;text-indent: 0pt;line-height: 57%;text-align: left;">Module <span style=" color: #548235;">mod    </span>Dependency <span style=" color: #548235;">lib:</span><span style=" color: #F00;">test   </span><span class="s122">Expected scope : </span><span class="s21">compile</span></p><p class="s9" style="padding-left: 19pt;text-indent: 0pt;line-height: 6pt;text-align: left;">Contains  <span class="s29">When built                               </span><span style=" color: #F00;">Build Error</span></p><p class="s124" style="padding-left: 4pt;text-indent: 0pt;line-height: 9pt;text-align: left;"><span class="s20">import lib.A   </span><span class="s123">Build time dependencies  </span>When building <span style=" color: #548235;">mod, lib </span>won’t appear due to</p><p class="s7" style="padding-left: 4pt;text-indent: 0pt;text-align: left;"><span class="s10">A classA = new A();          </span>scope <span style=" color: #F00;">test</span>, leading to <span style=" color: #F00;">build error</span></p><p style="padding-top: 5pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 70pt;text-indent: 0pt;text-align: left;">Dependency <span style=" color: #548235;">lib</span></p></td></tr><tr style="height:34pt"><td style="width:301pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F" colspan="3"><p style="text-indent: 0pt;text-align: left;"><span><img width="382" height="175" alt="image" src="DS-附录-中国科学-3_files/Image_057.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="23" height="23" alt="image" src="DS-附录-中国科学-3_files/Image_058.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="77" height="23" alt="image" src="DS-附录-中国科学-3_files/Image_059.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="23" height="23" alt="image" src="DS-附录-中国科学-3_files/Image_060.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="104" height="14" alt="image" src="DS-附录-中国科学-3_files/Image_061.png"/></span></p><p class="s5" style="padding-left: 4pt;text-indent: 0pt;line-height: 6pt;text-align: left;">(b) Hazard 2</p><p class="s9" style="padding-left: 38pt;text-indent: 0pt;line-height: 6pt;text-align: left;">Depends on</p><p class="s7" style="padding-top: 4pt;padding-left: 133pt;text-indent: 0pt;line-height: 6pt;text-align: left;">Expected scope : <span style=" color: #F00;">test          </span><span class="s29">Increase Build Cost</span></p><p class="s7" style="padding-left: 10pt;text-indent: 0pt;line-height: 5pt;text-align: left;">Module <span style=" color: #548235;">mod   </span>Dependency <span style=" color: #548235;">lib:</span><span style=" color: #F00;">compile</span></p><p class="s12" style="padding-left: 32pt;text-indent: 0pt;line-height: 5pt;text-align: left;">When built</p></td></tr><tr style="height:42pt"><td style="width:37pt;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:solid;border-right-width:2pt;border-right-color:#548235"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:69pt;border-top-style:solid;border-top-width:2pt;border-top-color:#548235;border-left-style:solid;border-left-width:2pt;border-left-color:#548235;border-bottom-style:dashed;border-bottom-width:3pt;border-bottom-color:#7F7F7F;border-right-style:solid;border-right-width:2pt;border-right-color:#548235"><p class="s126" style="padding-left: 3pt;text-indent: 0pt;line-height: 6pt;text-align: center;">Build time dependencies</p><p class="s8" style="text-indent: 0pt;text-align: center;">Includes</p><p style="padding-top: 9pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 2pt;text-indent: 0pt;text-align: center;">Dependency <span style=" color: #548235;">lib</span></p></td><td style="width:195pt;border-left-style:solid;border-left-width:2pt;border-left-color:#548235;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p class="s7" style="padding-left: 6pt;text-indent: 0pt;line-height: 4pt;text-align: left;">When building <span style=" color: #548235;">mod, lib </span>is accessed due to scope <span style=" color: #F00;">compile!</span></p><p class="s7" style="padding-left: 6pt;text-indent: 0pt;text-align: left;">Expected scope is <span style=" color: #F00;">test</span>, <span style=" color: #548235;">lib </span>only needed at <span style=" color: #F00;">test time!</span></p></td></tr><tr style="height:59pt"><td style="width:301pt;border-top-style:dashed;border-top-width:3pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F" colspan="3"><p class="s5" style="padding-left: 4pt;text-indent: 0pt;line-height: 5pt;text-align: left;">(c) Hazard 3</p><p class="s9" style="padding-top: 3pt;padding-left: 36pt;text-indent: 0pt;line-height: 57%;text-align: left;">Depends on    Contains class   <span class="s13">lib.A</span><span class="s14">            </span><span class="s53">Runtime Error</span></p><p class="s11" style="padding-left: 36pt;padding-right: 55pt;text-indent: 0pt;line-height: 3pt;text-align: center;">public class A {</p><p class="s7" style="padding-top: 1pt;padding-left: 132pt;text-indent: 0pt;line-height: 6pt;text-align: left;"><span class="s13">...</span><span class="s14">    </span>But <span style=" color: #548235;">lib1 </span>is expected to appear</p><p class="s7" style="padding-left: 10pt;text-indent: 0pt;line-height: 65%;text-align: left;">Module <span style=" color: #548235;">mod  </span>Dependency <span style=" color: #548235;">lib:</span><span style=" color: #F00;">compileOnly  </span><span class="s13">}</span><span class="s14">      </span><span class="s122">both at </span><span class="s21">buildtime </span><span class="s122">and </span><span class="s21">runtime</span></p><p class="s9" style="padding-left: 27pt;text-indent: 0pt;line-height: 5pt;text-align: left;">Contains code</p><p class="s7" style="padding-top: 1pt;padding-left: 12pt;text-indent: 0pt;text-align: left;"><span class="s11">import lib.A     </span>Scope <span style=" color: #F00;">compileOnly </span>means</p><p class="s8" style="padding-left: 12pt;text-indent: 0pt;text-align: left;"><span class="s127">A classA = new A();  </span>lib <span style=" color: #F00;">won’t appear </span><span style=" color: #000;">at </span>mod’s <span style=" color: #F00;">runtime</span></p></td></tr><tr style="height:81pt"><td style="width:301pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F" colspan="3"><p style="text-indent: 0pt;text-align: left;"><span><img width="22" height="22" alt="image" src="DS-附录-中国科学-3_files/Image_062.png"/></span></p><p class="s5" style="padding-left: 4pt;text-indent: 0pt;line-height: 7pt;text-align: left;">(d) Hazard 5</p><p style="text-indent: 0pt;text-align: left;"><span><img width="135" height="67" alt="image" src="DS-附录-中国科学-3_files/Image_063.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="104" height="14" alt="image" src="DS-附录-中国科学-3_files/Image_064.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="77" height="23" alt="image" src="DS-附录-中国科学-3_files/Image_065.png"/></span></p><p class="s9" style="padding-left: 38pt;text-indent: 0pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"><span><img width="74" height="33" alt="image" src="DS-附录-中国科学-3_files/Image_066.png"/></span></p><p class="s7" style="padding-top: 5pt;padding-left: 133pt;text-indent: 0pt;line-height: 6pt;text-align: left;">Expected scope : <span style=" color: #F00;">test           Redundant Artifact</span></p><p class="s7" style="padding-left: 36pt;padding-right: 180pt;text-indent: -25pt;line-height: 81%;text-align: left;">Module <span style=" color: #548235;">mod  </span>Dependency <span style=" color: #548235;">lib:</span><span style=" color: #F00;">compile When packaged as excuteble artifact</span></p><p class="s124" style="padding-left: 32pt;padding-right: 66pt;text-indent: 0pt;line-height: 67%;text-align: left;"><span class="s128">Executable artifact      </span>Artifact is <span style=" color: #F00;">redundant </span>because <span style=" color: #548235;">lib1’s </span>expected <span class="s130">Includes     </span><span class="s131">Includes     </span>scope is <span style=" color: #548235;">test </span>and should <span style=" color: #F00;">not </span>be included!</p><p style="padding-top: 5pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">Module <span style=" color: #548235;">mod </span><span class="s15">Dependency </span><span class="s16">lib1</span></p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s44" style="text-indent: 0pt;text-align: center;"><span class="p">图 </span><span class="h2">A8 </span>异味 <span class="h1">1.6 </span>对当前模块的危害与对应触发场景</p><h2 style="text-indent: 0pt;text-align: center;">Figure A8 <span class="s4">Possible Hazards to Current Module and Triggering Scenarios of Smell 1.6.</span></h2><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li data-list-text="g."><p class="s4" style="padding-left: 30pt;text-indent: -9pt;line-height: 86%;text-align: justify;"><span class="p">下游模块运行时错误：以预期依赖范围为 </span>runtime<span class="p">，实际范围为 </span>test <a href="#bookmark8" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">为例，在图</a>A9(c) <span class="p">中，模块 </span>mod <span class="p">将依赖库 </span>lib <span class="p">的依赖范围设置为 </span>test<span class="p">，此范围意味着 </span>test <span class="p">不会在运行时被引入，但事实上 </span>mod <span class="p">中的方法 </span>runMtdLib <span class="p">以反射形式获取 </span>lib <span class="p">中的类 </span>lib.A<span class="p">，其预期范围应该是 </span>runtime<span class="p">。由于 </span>lib.A <span class="p">以反射形式被引入，此时 </span>mod <span class="p">可以正常进行构建，但当下游项目运行时使用 </span>runMthdLib <span class="p">时，则会因为 </span>lib<span class="p">未在运行时被引入，无法找到 </span>lib.A<span class="p">，从而导致下游模块运行时错误。</span></p></li><li data-list-text="h."><p class="s4" style="padding-left: 31pt;text-indent: -10pt;line-height: 86%;text-align: justify;"><span class="p">下游模块构建产物冗余：以预期范围为 </span>test<span class="p">，实际范围为 </span>compile <a href="#bookmark8" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">为例，在图</a>A9(d) <span class="p">中，模块 </span>mod <span class="p">将直接依赖 </span>lib <span class="p">的依赖范围设置为 </span>compile<span class="p">，但其实际上仅在测试时被使用，预期依赖范围应为 </span>test<span class="p">。下游模块 </span>client <span class="p">在使用模块 </span>mod <span class="p">的同时，也引入了 </span>mod <span class="p">的依赖库 </span>lib <span class="p">作为传递依赖。将 </span>client <span class="p">打包为可执行 </span>JAR <span class="p">时，直接依赖和传递依赖中依赖范围为 </span>compile <span class="p">的依赖库都会被包含，但事实上 </span>lib <span class="p">仅在测试时使用而不需被打包，这就导致导致下游模块 </span>lib <span class="p">构建产物冗余。</span></p></li></ol><h2 style="padding-left: 20pt;text-indent: 0pt;line-height: 13pt;text-align: left;">(1.7) <span class="p">依赖范围冲突</span></h2><p style="padding-left: 5pt;text-indent: 15pt;line-height: 86%;text-align: left;">依赖范围冲突与异味 <span class="s4">1.6 </span>依赖范围误用类似，不同依赖范围之间的冲突可能造成不同的危害。我们将最终结果展示在表<span class="h2">??</span>中，其中表 列代表直接依赖的依赖范围，表行代表被覆盖的传递依赖的依赖范围，表的内容是对应依赖范围出现冲突时的后果。与依赖范围误用不同，依赖范围冲突不会对下游模块造成危害，因为 <span class="s4">Maven </span>中的漏洞仅会影响项目自身依赖解析。此外，从表格的右上部分可以看出，当直接依赖的使用场景包含了传递依赖的使用场景时也不会造成危害。下面我们将详述各类危害的具体触发情境。</p><ol id="l13"><li data-list-text="a."><p class="s4" style="padding-left: 30pt;text-indent: -9pt;line-height: 86%;text-align: justify;"><span class="p">构建失败：其触发场景为直接依赖的 </span>runtime <span class="p">和 </span>test <span class="p">范围覆盖了传递依赖的 </span>compile <span class="p">和 </span>provided <a href="#bookmark9" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">范围。以图</a>A10(a) <span class="p">为例，模块 </span>mod <span class="p">有直接依赖 </span>lib1 <span class="p">和 </span>lib2<span class="p">，而 </span>lib1 <span class="p">也引入 </span>lib2 <span class="p">作为传递依赖。在 </span>mod <span class="p">的依赖树中，</span>lib2 <span class="p">作为直接依赖的范围是 </span>test<span class="p">，而作为传递依赖的范围是 </span>compile<span class="p">。此时，</span>lib2 <span class="p">的最终范围是 </span>test<span class="p">，仅会在测试时出现。但在 </span>mod <span class="p">中虽然并未直接引入 </span>lib2 <span class="p">中的类，但其中的类 </span>C <span class="p">以 </span>lib2 <span class="p">中的类 </span>A <span class="p">为父类，这就导致 </span>mod <span class="p">构建时无法找到类 </span>A<span class="p">，进而出现构建失败。</span></p></li></ol><h2 style="padding-left: 20pt;text-indent: 0pt;line-height: 13pt;text-align: left;">(1.8) <span class="p">依赖树冲突</span></h2><p style="padding-left: 20pt;text-indent: 0pt;line-height: 12pt;text-align: left;">依赖树冲突的危害与异味 <span class="s4">1.3 </span>类似，其差别在于异味 <span class="s4">1.3 </span>关注于单一依赖树中的库版本冲突，而异味 <span class="s4">1.8 </span>则关注于 <span class="s4">Maven </span>和 <span class="s4">Gradle</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">之间依赖树的冲突，下面我们将详述各类危害的具体触发情境<span class="s4">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:51.3495pt" cellspacing="0"><tr style="height:63pt"><td style="width:361pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F" colspan="3"><p style="text-indent: 0pt;text-align: left;"><span><img width="465" height="84" alt="image" src="DS-附录-中国科学-3_files/Image_067.png"/></span></p><p class="s7" style="padding-left: 3pt;text-indent: 0pt;line-height: 8pt;text-align: left;"><a name="bookmark8">&zwnj;</a><span class="s132">(a) Hazard 6   </span><span class="s6">Depends on    Depends on      </span>Scope <span style=" color: #F00;">implementation </span>means <span style=" color: #548235;">lib </span><span style=" color: #F00;">won’t</span></p><p class="s12" style="padding-left: 191pt;text-indent: 0pt;text-align: left;">appear <span style=" color: #000;">at </span><span style=" color: #548235;">client’s </span>build time</p><p class="s7" style="padding-top: 2pt;padding-left: 47pt;padding-right: 154pt;text-indent: -26pt;line-height: 83%;text-align: left;">Downstream Module <span style=" color: #548235;">client </span>Module <span style=" color: #548235;">mod </span>Dependency <span style=" color: #548235;">lib:</span><span style=" color: #F00;">implementation </span><span style=" color: #1F4E79;">Contains class    Contains class    </span><span class="s6">Contains class</span></p><p class="s19" style="padding-top: 3pt;padding-left: 29pt;text-indent: 0pt;text-align: left;">client.C        <span class="s20">mod.B       </span>lib.A            <span class="s12">Downstream Module Build Error</span></p><p class="s11" style="padding-left: 10pt;padding-right: 154pt;text-indent: 0pt;text-align: left;">import mod.B     import lib1.A     public class A { public class C <span style=" color: #F00;">extends B </span>{ public class B <span style=" color: #F00;">extends A </span>{   ...</p><p class="s7" style="padding-right: 88pt;text-indent: 0pt;line-height: 5pt;text-align: right;"><span class="s11">...         ...        }   </span>But <span style=" color: #548235;">lib1 </span>is expected to appear at <span style=" color: #548235;">client’s</span></p><p class="s19" style="padding-right: 92pt;text-indent: 0pt;text-align: right;">}          <span class="s20">}             </span><span class="s12">buildtime </span><span class="s7">since class A is super class</span></p></td></tr><tr style="height:33pt"><td style="width:361pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F" colspan="3"><p class="s133" style="padding-left: 3pt;text-indent: 0pt;text-align: left;">(b) Hazard 7   <span class="s6">Depends on    Depends on       </span><span class="s7">Expected scope: </span><span class="s12">implementation</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="60" height="23" alt="image" src="DS-附录-中国科学-3_files/Image_068.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="92" height="23" alt="image" src="DS-附录-中国科学-3_files/Image_069.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="11" alt="image" src="DS-附录-中国科学-3_files/Image_070.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="131" height="26" alt="image" src="DS-附录-中国科学-3_files/Image_071.png"/></span></p><p class="s7" style="padding-left: 21pt;padding-right: 92pt;text-indent: 158pt;line-height: 131%;text-align: left;"><span style=" color: #F00;">Shouldn’t </span>appear at <span style=" color: #548235;">client’s </span><span style=" color: #F00;">build time </span>Downstream Module <span style=" color: #548235;">client </span>Module <span style=" color: #548235;">mod    </span>Dependency <span style=" color: #548235;">lib:</span><span style=" color: #F00;">api</span></p></td></tr><tr style="height:42pt"><td style="width:37pt;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:solid;border-right-width:2pt;border-right-color:#548235"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:78pt;border-top-style:solid;border-top-width:2pt;border-top-color:#548235;border-left-style:solid;border-left-width:2pt;border-left-color:#548235;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:solid;border-right-width:2pt;border-right-color:#548235"><p style="text-indent: 0pt;text-align: left;"><span><img width="322" height="56" alt="image" src="DS-附录-中国科学-3_files/Image_072.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="108" height="48" alt="image" src="DS-附录-中国科学-3_files/Image_073.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="141" height="33" alt="image" src="DS-附录-中国科学-3_files/Image_074.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="92" height="23" alt="image" src="DS-附录-中国科学-3_files/Image_075.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="4" height="13" alt="image" src="DS-附录-中国科学-3_files/Image_076.png"/></span></p><p class="s126" style="padding-left: 1pt;text-indent: 0pt;line-height: 7pt;text-align: left;">Build time dependencies</p><p class="s50" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">Includes  <span class="s8">Includes</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s34" style="padding-left: 2pt;text-indent: 0pt;line-height: 89%;text-align: left;">Module <span style=" color: #548235;">mod </span><span class="s7">Dependency </span><span class="s8">lib1</span></p></td><td style="width:246pt;border-left-style:solid;border-left-width:2pt;border-left-color:#548235;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p class="s7" style="padding-top: 3pt;padding-left: 11pt;text-indent: 0pt;line-height: 6pt;text-align: left;">When building <span style=" color: #548235;">client, lib1 </span>has to be</p><p class="s122" style="padding-left: 11pt;text-indent: 0pt;line-height: 88%;text-align: left;">downloaded even if <span style=" color: #F00;">expected scope is        </span><span class="s12">Increase Downstream Module Build Cost</span></p><p class="s12" style="padding-left: 11pt;text-indent: 0pt;text-align: left;">implementation<span style=" color: #000;">, thus </span>increasing build cost</p></td></tr><tr style="height:72pt"><td style="width:361pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F" colspan="3"><p class="s5" style="padding-left: 2pt;text-indent: 0pt;line-height: 7pt;text-align: left;">(c) Hazard 8</p><p class="s51" style="padding-left: 61pt;text-indent: 0pt;line-height: 94%;text-align: left;">Depends on    <span class="s9">Depends on    </span><span class="s7">Expected scope: </span><span class="s12">implementation   </span><span class="s21">Downstream Module Runtime Error</span></p><p style="padding-top: 1pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s29" style="padding-left: 17pt;padding-right: 92pt;text-indent: 3pt;line-height: 94%;text-align: left;"><span class="s7">Downstream Module </span><span class="s8">client </span><span class="s7">Module </span><span class="s8">mod  </span><span class="s7">Dependency </span><span class="s8">lib:</span><span class="s12">test   </span><span style=" color: #000;">Scope </span>test <span style=" color: #000;">means </span><span style=" color: #548235;">lib </span>won’t <span class="s12">Contains</span><span><img width="22" height="10" alt="image" src="DS-附录-中国科学-3_files/Image_077.png"/></span>        <span style=" color: #1F4E79;">Contains class    </span><span class="s9">Contains class  </span>appear <span style=" color: #000;">at </span><span style=" color: #548235;">client’s </span>runtime</p><p class="s134" style="padding-top: 1pt;padding-left: 4pt;text-indent: 0pt;text-align: left;">import mod.RunA</p><p style="padding-top: 1pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s134" style="padding-left: 4pt;padding-right: 234pt;text-indent: 0pt;line-height: 117%;text-align: left;">RunA runner = new RunA( runner.<span style=" color: #F00;">runMtdLib</span>();</p></td></tr><tr style="height:84pt"><td style="width:361pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F" colspan="3"><p class="s5" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">(d) Hazard 9</p><p class="s136" style="padding-top: 1pt;padding-left: 43pt;text-indent: 0pt;text-align: left;">Depends on      Depends on                     <span class="s12">Downstream Module Redundant Artifact</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="175" height="24" alt="image" src="DS-附录-中国科学-3_files/Image_078.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="175" height="71" alt="image" src="DS-附录-中国科学-3_files/Image_079.png"/></span></p><p class="s7" style="padding-top: 3pt;padding-left: 31pt;padding-right: 117pt;text-indent: -20pt;line-height: 86%;text-align: left;"><span class="s15">Downstream Module </span><span class="s16">client </span>Module <span style=" color: #548235;">mod  </span>Dependency <span style=" color: #548235;">lib:</span><span style=" color: #F00;">compile   </span><span class="s137">Expected scope : </span><span class="s33">test </span><span style=" color: #F00;">When packaged as excuteble artifact</span></p><p class="s124" style="padding-top: 1pt;padding-left: 35pt;text-indent: 0pt;line-height: 69%;text-align: left;"><span class="s138">Executable artifact           </span>Downstream artifact <span style=" color: #F00;">redundant </span>because <span style=" color: #548235;">mod </span>introduces <span style=" color: #548235;">lib!</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="250" height="40" alt="image" src="DS-附录-中国科学-3_files/Image_080.png"/></span></p><p class="s50" style="padding-left: 103pt;text-indent: 0pt;line-height: 63%;text-align: left;">Includes     <span class="s8">lib1’s e</span><span class="s7">xpected scope is </span><span class="s12">test, should not be packaged!</span></p><p class="s8" style="padding-left: 33pt;text-indent: 0pt;line-height: 5pt;text-align: left;">Includes Includes</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 40pt;text-indent: 0pt;text-align: left;">Module <span style=" color: #548235;">client </span>Module <span style=" color: #548235;">mod </span>Dependency <span style=" color: #548235;">lib1</span></p></td></tr></table><p style="padding-top: 6pt;text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:3pt" cellspacing="0"><tr style="height:5pt"><td style="width:77pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s10" style="text-indent: 0pt;line-height: 2pt;text-align: center;">mod.RunA</p></td><td style="width:46pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" rowspan="2"><p class="s11" style="padding-top: 2pt;padding-left: 13pt;text-indent: 0pt;line-height: 3pt;text-align: left;">lib.A</p></td></tr><tr style="height:3pt"><td style="width:77pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt" rowspan="2"><p class="s11" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">public class RunA {</p><p class="s139" style="padding-left: 14pt;text-indent: -18pt;line-height: 79%;text-align: left;">); <span class="s140">public void runMtdLib(){ </span><span class="s141">Class.forName(“lib.A”);</span></p><p class="s11" style="padding-top: 1pt;padding-left: 4pt;text-indent: 0pt;text-align: left;">}</p><p class="s11" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">}</p></td></tr><tr style="height:25pt"><td style="width:46pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s11" style="padding-top: 2pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">public class A {</p><p class="s11" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">...</p><p class="s11" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">}</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"/><p class="s44" style="text-indent: 0pt;text-align: center;"><span class="p">图 </span><span class="h2">A9 </span>异味 <span class="h1">1.6 </span>对下游模块的危害与对应触发场景</p><p class="s42" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"/><h2 style="text-indent: 0pt;text-align: center;">Figure A9 <span class="s4">Possible Hazards to Downstream Module and Triggering Scenarios of Smell 1.6.</span></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="392" height="210" alt="image" src="DS-附录-中国科学-3_files/Image_081.png"/></span></p><h3 style="text-indent: 0pt;line-height: 8pt;text-align: left;">(a) Harzard 1</h3><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="text-indent: 7pt;line-height: 112%;text-align: left;">But scope <span style=" color: #F00;">compile </span>is overridden by <span style=" color: #F00;">test </span>which means <span style=" color: #548235;">lib2 </span>will appear only at <span style=" color: #F00;">test time</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Dependency <span style=" color: #548235;">lib2</span><span style=" color: #F00;">:test</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s43" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Build Error</p><p style="text-indent: 0pt;text-align: left;"/><p class="s42" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"/><p class="s42" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="padding-left: 4pt;text-indent: 0pt;line-height: 6pt;text-align: left;">Scope <span style=" color: #F00;">runtime </span>means <span style=" color: #548235;">lib2</span></p><p class="s118" style="text-indent: 0pt;text-align: left;">is expected at <span style=" color: #548235;">lib1’s </span><span style=" color: #F00;">build time</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Module <span style=" color: #548235;">mod</span></p><p class="s42" style="padding-left: 14pt;text-indent: 0pt;line-height: 6pt;text-align: left;">Contains class</p><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Dependency <span style=" color: #548235;">lib1</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Dependency <span style=" color: #548235;">lib2</span><span style=" color: #F00;">:compile</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s42" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Contains class</p><p style="text-indent: 0pt;text-align: left;"/><p class="s42" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Contains class</p><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="text-indent: 6pt;line-height: 110%;text-align: left;">But scope <span style=" color: #F00;">runtime </span>is overridden by <span style=" color: #F00;">test </span>which means <span style=" color: #548235;">lib2 </span>will appear only at <span style=" color: #F00;">testtime</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Dependency <span style=" color: #548235;">lib2</span><span style=" color: #F00;">:test</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s43" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Runtime Error</p><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="padding-left: 46pt;text-indent: 1pt;line-height: 112%;text-align: left;">Scope <span style=" color: #F00;">runtime </span>means <span style=" color: #548235;">lib2 </span>is expected at <span style=" color: #548235;">lib1’s </span><span style=" color: #F00;">runtime</span></p><p class="s118" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">Dependency <span style=" color: #548235;">lib2</span><span style=" color: #F00;">:runtime</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Dependency <span style=" color: #548235;">lib1</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s118" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Module <span style=" color: #548235;">mod</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s42" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"/><h3 style="text-indent: 0pt;line-height: 8pt;text-align: left;">(b) Hazard 3</h3><p class="s42" style="padding-left: 36pt;text-indent: 0pt;line-height: 6pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"/><p class="s142" style="padding-top: 2pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">public class A {</p><p class="s142" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">...</p><p class="s142" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"/><div class="textbox" style="border:0.5pt solid #000000;display:block;min-height:5.6pt;width:45.1pt;"><p class="s11" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;line-height: 4pt;text-align: left;">lib2.A</p></div><p style="text-indent: 0pt;text-align: left;"/><p class="s142" style="padding-top: 2pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">import lib2.A</p><p class="s142" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">public class B <span style=" color: #F00;">extends A </span>{</p><p class="s142" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">...</p><p class="s142" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"/><div class="textbox" style="border:0.5pt solid #000000;display:block;min-height:5.6pt;width:70.5pt;"><p class="s11" style="padding-top: 1pt;text-indent: 0pt;line-height: 4pt;text-align: center;">lib1.B</p></div><p style="text-indent: 0pt;text-align: left;"/><p class="s142" style="padding-top: 2pt;padding-left: 1pt;text-indent: 0pt;text-align: left;">import lib1.B</p><p class="s142" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">public class C <span style=" color: #F00;">extends B </span>{</p><p class="s142" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">...</p><p class="s142" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"/><div class="textbox" style="border:0.5pt solid #000000;display:block;min-height:5.6pt;width:70.5pt;"><p class="s11" style="padding-top: 1pt;padding-left: 20pt;text-indent: 0pt;line-height: 4pt;text-align: left;">mod.C</p></div><p style="text-indent: 0pt;text-align: left;"/><p class="s44" style="text-indent: 0pt;text-align: center;"><a name="bookmark9">&zwnj;</a><span class="p">图 </span><span class="h2">A10 </span>异味 <span class="h1">1.7 </span>可能危害与对应触发场景</p><h2 style="text-indent: 0pt;text-align: center;">Figure A10 <span class="s4">Examples of characteristics of Project-Level Dependency Smell.</span></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:69.3155pt" cellspacing="0"><tr style="height:71pt"><td style="width:324pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p class="s47" style="padding-top: 1pt;padding-left: 3pt;text-indent: 0pt;line-height: 51%;text-align: left;"><a name="bookmark10">&zwnj;</a>(a) Hazard 1  <span class="s134">import lib.Dup</span></p><p style="padding-top: 1pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s134" style="padding-left: 51pt;text-indent: 0pt;line-height: 70%;text-align: left;">Dup classDup = new Dup();                    <span class="s53">Build Error</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="130" height="42" alt="image" src="DS-附录-中国科学-3_files/Image_082.png"/></span></p><p class="s144" style="padding-left: 29pt;text-indent: 0pt;line-height: 5pt;text-align: left;"><span class="s143">Contains </span>classDup.<span style=" color: #F00;">methodV1</span>();</p><p style="text-indent: 0pt;text-align: left;"><span><img width="58" height="33" alt="image" src="DS-附录-中国科学-3_files/Image_083.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="71" height="23" alt="image" src="DS-附录-中国科学-3_files/Image_084.png"/></span></p><p class="s9" style="padding-top: 4pt;padding-right: 8pt;text-indent: 0pt;text-align: center;">Contains class</p><p class="s9" style="padding-left: 8pt;padding-right: 225pt;text-indent: 0pt;text-align: center;">Depends on</p><p style="text-indent: 0pt;text-align: left;"><span><img width="70" height="23" alt="image" src="DS-附录-中国科学-3_files/Image_085.png"/></span></p><p class="s7" style="padding-top: 1pt;padding-right: 62pt;text-indent: 0pt;text-align: center;">Dependency <span style=" color: #548235;">lib:</span><span style=" color: #F00;">v2.0.0</span></p><p class="s7" style="padding-left: 3pt;padding-right: 138pt;text-indent: 0pt;text-align: center;">Module <span style=" color: #548235;">mod   </span>Dependency <span style=" color: #548235;">lib       </span><span style=" color: #1F4E79;">Contains class</span></p><p style="padding-top: 1pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-right: 62pt;text-indent: 0pt;line-height: 6pt;text-align: center;">Dependency <span style=" color: #548235;">lib:</span><span style=" color: #F00;">v1.0.0</span></p></td></tr><tr style="height:63pt"><td style="width:324pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p class="s132" style="padding-left: 3pt;text-indent: 0pt;line-height: 9pt;text-align: left;">(b) Hazard 3 <span class="s135">Class c = Class.forName(“lib.DupV1”);</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="131" height="43" alt="image" src="DS-附录-中国科学-3_files/Image_086.png"/></span></p><p class="s143" style="padding-left: 29pt;text-indent: 0pt;line-height: 6pt;text-align: left;">Contains</p><p style="text-indent: 0pt;text-align: left;"><span><img width="60" height="33" alt="image" src="DS-附录-中国科学-3_files/Image_087.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="86" height="23" alt="image" src="DS-附录-中国科学-3_files/Image_088.png"/></span></p><p class="s9" style="padding-top: 2pt;padding-left: 138pt;text-indent: 0pt;text-align: left;">Contains class                  <span class="s146">Runtime Error</span></p><p class="s9" style="padding-left: 38pt;text-indent: 0pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"><span><img width="71" height="23" alt="image" src="DS-附录-中国科学-3_files/Image_089.png"/></span></p><p class="s7" style="padding-top: 1pt;padding-left: 104pt;text-indent: 0pt;text-align: left;">Dependency <span style=" color: #548235;">lib:</span><span style=" color: #F00;">v2.0.0</span></p><p class="s7" style="padding-left: 14pt;text-indent: 0pt;text-align: left;">Module <span style=" color: #548235;">mod   </span>Dependency <span style=" color: #548235;">lib       </span><span class="s48">Contains class</span></p><p class="s7" style="padding-top: 5pt;padding-left: 104pt;text-indent: 0pt;line-height: 6pt;text-align: left;">Dependency <span style=" color: #548235;">lib:</span><span style=" color: #F00;">v1.0.0</span></p></td></tr><tr style="height:78pt"><td style="width:324pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p class="s52" style="padding-left: 1pt;text-indent: 0pt;text-align: left;">(c) Hazard 4<span class="s134">import lib.Dup</span></p><p class="s134" style="padding-top: 4pt;padding-left: 39pt;text-indent: 0pt;line-height: 4pt;text-align: left;">Dup classDup = new Dup();</p><p style="text-indent: 0pt;text-align: left;"><span><img width="130" height="43" alt="image" src="DS-附录-中国科学-3_files/Image_090.png"/></span></p><p class="s134" style="padding-left: 12pt;text-indent: 0pt;line-height: 7pt;text-align: left;"><span class="s143">Contains  </span>System.out.println(<span style=" color: #F00;">classDup.methodDup</span>());              <span class="s23">Semantic Conflict</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="69" height="23" alt="image" src="DS-附录-中国科学-3_files/Image_091.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="72" height="33" alt="image" src="DS-附录-中国科学-3_files/Image_092.png"/></span></p><p class="s9" style="padding-right: 20pt;text-indent: 0pt;line-height: 6pt;text-align: center;">Contains class</p><p class="s9" style="padding-top: 2pt;padding-left: 3pt;padding-right: 229pt;text-indent: 0pt;text-align: center;">Depends on</p><p style="text-indent: 0pt;text-align: left;"><span><img width="69" height="23" alt="image" src="DS-附录-中国科学-3_files/Image_093.png"/></span></p><p class="s7" style="padding-top: 1pt;padding-right: 71pt;text-indent: 0pt;line-height: 5pt;text-align: center;">Dependency <span style=" color: #548235;">lib:</span><span style=" color: #F00;">v2.0.0</span></p><p class="s7" style="padding-left: 10pt;text-indent: 0pt;line-height: 8pt;text-align: left;">Module <span style=" color: #548235;">mod   </span>Dependency <span style=" color: #548235;">lib       </span><span class="s136">Contains class</span></p><p style="padding-top: 2pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-right: 71pt;text-indent: 0pt;text-align: center;">Dependency <span style=" color: #548235;">lib:</span><span style=" color: #F00;">v1.0.0</span></p></td></tr><tr style="height:54pt"><td style="width:324pt;border-top-style:dashed;border-top-width:2pt;border-top-color:#7F7F7F;border-left-style:dashed;border-left-width:2pt;border-left-color:#7F7F7F;border-bottom-style:dashed;border-bottom-width:2pt;border-bottom-color:#7F7F7F;border-right-style:dashed;border-right-width:2pt;border-right-color:#7F7F7F"><p style="text-indent: 0pt;text-align: left;"><span><img width="22" height="22" alt="image" src="DS-附录-中国科学-3_files/Image_094.png"/></span></p><p class="s5" style="padding-left: 1pt;text-indent: 0pt;line-height: 7pt;text-align: left;">(d) Harzard 11</p><p class="s28" style="text-indent: 0pt;line-height: 3pt;text-align: center;">&lt;dependency&gt;</p><p style="text-indent: 0pt;text-align: left;"><span><img width="154" height="50" alt="image" src="DS-附录-中国科学-3_files/Image_095.png"/></span></p><p class="s9" style="padding-left: 41pt;text-indent: 0pt;line-height: 7pt;text-align: left;">Depends on    <span class="s6">Related config in </span><span class="s29">Maven </span><span class="s28">&lt;groupId&gt;example&lt;/groupId&gt;</span></p><p class="s28" style="padding-left: 158pt;text-indent: 0pt;line-height: 6pt;text-align: left;">&lt;artifactId&gt;lib&lt;/artifactId&gt;  <span class="s146">Increase maintenance cost</span></p><p class="s28" style="padding-left: 9pt;text-indent: 0pt;line-height: 67%;text-align: left;"><span class="s34">Module </span><span class="s35">mod     </span><span class="s36">Dependency </span><span class="s37">lib        </span>&lt;version&gt;<span class="s38">1.0.0</span>&lt;/version&gt;</p><p class="s28" style="padding-left: 3pt;text-indent: 0pt;line-height: 3pt;text-align: center;">&lt;/dependency&gt;</p><p style="text-indent: 0pt;text-align: left;"><span><img width="70" height="28" alt="image" src="DS-附录-中国科学-3_files/Image_096.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="98" height="33" alt="image" src="DS-附录-中国科学-3_files/Image_097.png"/></span></p><p class="s12" style="padding-top: 3pt;padding-left: 72pt;text-indent: 0pt;text-align: center;">Conflict!</p><p class="s28" style="padding-top: 2pt;padding-left: 150pt;text-indent: 0pt;line-height: 5pt;text-align: left;">implementation “example:lib:<span class="s38">2.0.0</span>”</p></td></tr></table><p style="padding-top: 6pt;text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="13" height="12" alt="image" src="DS-附录-中国科学-3_files/Image_098.png"/></span></p><p class="s43" style="text-indent: 0pt;line-height: 6pt;text-align: left;">v1.0.0 <span style=" color: #1F4E79;">in </span>Gradle</p><p style="text-indent: 0pt;text-align: left;"/><p class="s43" style="text-indent: 0pt;line-height: 6pt;text-align: left;">v1.0.0 <span style=" color: #1F4E79;">in </span>Gradle</p><p style="text-indent: 0pt;text-align: left;"/><p class="s43" style="text-indent: 0pt;line-height: 6pt;text-align: left;">v1.0.0 <span style=" color: #1F4E79;">in </span>Gradle</p><p style="text-indent: 0pt;text-align: left;"/><p class="s42" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Related config in <span style=" color: #F00;">Gradle</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s43" style="text-indent: 0pt;line-height: 6pt;text-align: left;">v2.0.0 <span style=" color: #1F4E79;">in </span>Maven</p><p style="text-indent: 0pt;text-align: left;"/><p class="s43" style="text-indent: 0pt;line-height: 6pt;text-align: left;">v2.0.0 <span style=" color: #1F4E79;">in </span>Maven</p><p style="text-indent: 0pt;text-align: left;"/><p class="s43" style="text-indent: 0pt;line-height: 6pt;text-align: left;">v2.0.0 <span style=" color: #1F4E79;">in </span>Maven</p><p style="text-indent: 0pt;text-align: left;"/><table style="border-collapse:collapse;margin-left:3pt" cellspacing="0"><tr style="height:5pt"><td style="width:54pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s10" style="padding-left: 2pt;padding-right: 4pt;text-indent: 0pt;line-height: 3pt;text-align: center;">lib.Dup</p></td></tr><tr style="height:15pt"><td style="width:54pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s11" style="padding-left: 7pt;text-indent: -5pt;line-height: 108%;text-align: left;">public class <span style=" color: #F00;">Dup </span>{ void <span style=" color: #F00;">methodV2();</span></p><p class="s11" style="padding-left: 2pt;text-indent: 0pt;line-height: 3pt;text-align: left;">}</p></td></tr><tr style="height:5pt"><td style="width:54pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s10" style="padding-left: 1pt;padding-right: 5pt;text-indent: 0pt;line-height: 3pt;text-align: center;">lib.Dup</p></td></tr><tr style="height:14pt"><td style="width:54pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s11" style="padding-left: 6pt;text-indent: -5pt;line-height: 108%;text-align: left;">public class <span style=" color: #F00;">Dup </span>{ void <span style=" color: #F00;">methodV1();</span></p><p class="s11" style="padding-left: 1pt;text-indent: 0pt;line-height: 3pt;text-align: left;">}</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"/><table style="border-collapse:collapse;margin-left:3pt" cellspacing="0"><tr style="height:5pt"><td style="width:54pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s10" style="padding-left: 5pt;padding-right: 4pt;text-indent: 0pt;line-height: 3pt;text-align: center;">lib.DupV1</p></td></tr><tr style="height:14pt"><td style="width:54pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:5pt"><td style="width:54pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s10" style="padding-left: 5pt;padding-right: 4pt;text-indent: 0pt;line-height: 3pt;text-align: center;">lib.DupV1</p></td></tr><tr style="height:14pt"><td style="width:54pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s11" style="padding-left: 7pt;text-indent: -5pt;line-height: 109%;text-align: left;">public class <span style=" color: #F00;">DupV1 </span>{ void <span style=" color: #F00;">methodV1();</span></p><p class="s11" style="padding-left: 1pt;text-indent: 0pt;line-height: 3pt;text-align: left;">}</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"/><table style="border-collapse:collapse;margin-left:3pt" cellspacing="0"><tr style="height:5pt"><td style="width:56pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s10" style="padding-right: 1pt;text-indent: 0pt;line-height: 3pt;text-align: center;">lib.Dup</p></td></tr><tr style="height:24pt"><td style="width:56pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s11" style="padding-left: 1pt;text-indent: 0pt;line-height: 4pt;text-align: left;">public class <span style=" color: #F00;">Dup </span>{</p><p class="s11" style="padding-left: 14pt;text-indent: -7pt;line-height: 108%;text-align: left;">String <span style=" color: #F00;">methodDup(){ </span>return <span style=" color: #F00;">“Lib1”</span></p><p class="s11" style="padding-left: 4pt;text-indent: 0pt;text-align: left;">}</p><p class="s11" style="padding-left: 1pt;text-indent: 0pt;line-height: 3pt;text-align: left;">}</p></td></tr><tr style="height:5pt"><td style="width:56pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s10" style="padding-right: 1pt;text-indent: 0pt;line-height: 3pt;text-align: center;">lib.Dup</p></td></tr><tr style="height:24pt"><td style="width:56pt;border-top-style:solid;border-top-width:1pt;border-left-style:solid;border-left-width:1pt;border-bottom-style:solid;border-bottom-width:1pt;border-right-style:solid;border-right-width:1pt"><p class="s11" style="padding-left: 1pt;text-indent: 0pt;line-height: 4pt;text-align: left;">public class <span style=" color: #F00;">Dup </span>{</p><p class="s11" style="padding-left: 14pt;text-indent: -7pt;line-height: 109%;text-align: left;">String <span style=" color: #F00;">methodDup(){ </span>return <span style=" color: #F00;">“Lib2”</span></p><p class="s11" style="padding-left: 4pt;text-indent: 0pt;text-align: left;">}</p><p class="s11" style="padding-left: 1pt;text-indent: 0pt;line-height: 3pt;text-align: left;">}</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"/><p class="s44" style="text-indent: 0pt;text-align: center;"><span class="p">图 </span><span class="h2">A11 </span>异味 <span class="h1">1.8 </span>可能危害与对应触发场景</p><h2 style="text-indent: 0pt;text-align: center;">Figure A11 <span class="s4">Examples of characteristics of Project-Level Dependency Smell.</span></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l14"><li data-list-text="a."><p class="s4" style="padding-left: 30pt;text-indent: -9pt;line-height: 86%;text-align: justify;"><a href="#bookmark10" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">构建失败：其触发场景为模块源码中调用了某冲突依赖库中独有的特性。以图</a>A11(a) <span class="p">为例，模块 </span>mod <span class="p">同时维护了 </span>Maven <span class="p">和 </span>Gradle<span class="p">对应的配置文件，但依赖库 </span>lib <span class="p">在 </span>Maven <span class="p">配置文件中的版本声明为 </span>2.0.0<span class="p">，而在 </span>Gradle <span class="p">配置文件中则为 </span>1.0.0<span class="p">。由于 </span>mod <span class="p">在源码中调用了仅存在于 </span>1.0.0 <span class="p">版本中的方法 </span>methodV1<span class="p">，试图使用 </span>Maven <span class="p">进行构建时无法找到对应方法，因此出现构建失败。</span></p></li><li data-list-text="b."><p class="s4" style="padding-left: 30pt;text-indent: -10pt;line-height: 86%;text-align: justify;"><a href="#bookmark10" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">运行时错误：其触发场景为模块运行时调用了某冲突依赖库中独有的特性。以图</a>A11(c) <span class="p">为例，与上例类似，</span>mod <span class="p">在 </span>Maven <span class="p">中依赖于 </span>lib:1.0.0 <span class="p">而在 </span>Gradle <span class="p">中依赖于 </span>lib:2.0.0<span class="p">。此时 </span>mod <span class="p">以反射形式获取仅存在于 </span>1.0.0 <span class="p">版本中的类 </span>lib.DupV1<span class="p">，能正常通过构建，但在运行 </span>Maven <span class="p">对应构建产物时，会因找不到 </span>lib.DupV1 <span class="p">而出现运行时错误。</span></p></li><li data-list-text="c."><p class="s4" style="padding-left: 30pt;text-indent: -9pt;line-height: 86%;text-align: justify;"><a href="#bookmark10" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">运行时语义冲突：其触发场景为模块运行时调用了冲突依赖库中签名相同但实现不同的方法。以图</a>A11(d) <span class="p">为例，与上例类似，</span>mod<span class="p">在 </span>Maven <span class="p">中依赖于 </span>lib:1.0.0 <span class="p">而在 </span>Gradle <span class="p">中依赖于 </span>lib:2.0.0<span class="p">。虽然类 </span>Dup <span class="p">中的方法 </span>methodDup <span class="p">在两个版本中都存在，但其具体实现不同。当 </span>mod <span class="p">试图调用 </span>methodDup <span class="p">时会出现语义冲突，在运行 </span>Maven <span class="p">构建产物时的输出为“</span>Lib1<span class="p">”，而运行 </span>Gradle <span class="p">构建产物时输出则为</span>”Lib2”<span class="p">。</span></p></li><li data-list-text="d."><p class="s4" style="padding-left: 31pt;text-indent: -10pt;line-height: 86%;text-align: justify;"><a href="#bookmark10" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">维护成本增加：这类危害在出现异味时始终存在。以图</a>A11(a) <span class="p">为例，模块 </span>mod <span class="p">同时维护了 </span>Maven <span class="p">和 </span>Gradle <span class="p">对应的配置文件，但依赖库 </span>lib <span class="p">在 </span>Maven <span class="p">配置文件中的版本为 </span>1.0.0<span class="p">，而在 </span>Gradle <span class="p">配置文件中为 </span>2.0.0<span class="p">。开发者在进行版本升级时需要同步更新至所有构建工具对应的配置文件，导致维护成本增加。</span></p></li></ol><h2 style="padding-left: 20pt;text-indent: 0pt;line-height: 12pt;text-align: left;">(2.1) <span class="p">构建工具配置缺失</span></h2><p style="padding-left: 20pt;text-indent: 0pt;line-height: 12pt;text-align: left;">构建工具配置缺失可能导致无法获取预期版本的构建工具，进而导致构建失败<span class="s4">.</span></p><ol id="l15"><li data-list-text="a."><p class="s4" style="padding-left: 30pt;text-indent: -9pt;line-height: 86%;text-align: justify;"><a href="#bookmark11" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">构建失败：其触发场景为项目实际使用的构建工具版本与预期不一致，且使用了仅存在于预期版本中的特性。以图</a>A12(a) <span class="p">为例，项目预期使用 </span>Gradle 4.1 <span class="p">版本并使用了 </span>4.1 <span class="p">中新引入的 </span>java-library <span class="p">特性，但实际上未对 </span>Gradle <span class="p">版本进行配置，导致实际使用的是本地 </span>Gradle <span class="p">的 </span>3.1 <span class="p">版本。因此，无法识别 </span>java-library <span class="p">特性，导致构建失败。</span></p></li></ol><h2 style="padding-left: 20pt;text-indent: 0pt;line-height: 12pt;text-align: justify;">(2.2) <span class="p">构建工具启动器 </span>JAR <span class="p">缺失</span></h2><p style="padding-left: 20pt;text-indent: 0pt;line-height: 12pt;text-align: justify;">构建工具启动器 <span class="s4">JAR </span>缺失与异味 <span class="s4">2.1 </span>类似，同样可能导致无法获取预期版本的构建工具，进而导致构建失败<span class="s4">.</span></p><ol id="l16"><li data-list-text="a."><p class="s4" style="padding-left: 31pt;text-indent: -10pt;line-height: 86%;text-align: justify;"><a href="#bookmark11" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">构建失败：其触发场景为项目使用构建工具启动器运行构建工具。以图</a>A13(a) <span class="p">为例，项目预期使用 </span>Gradle 4.1 <span class="p">版本并使用了 </span>4.1<span class="p">中新引入的 </span>java-library <span class="p">特性，但本地仅存在 </span>Gradle 3.1 <span class="p">版本而无法进行构建。在使用构建工具启动器时，由于项目中仅存在启动器脚本 </span>(gradlew)<span class="p">，而缺少启动器 </span>JAR(gradle-wrapper.jar)<span class="p">，因此无法找到 </span>gradle-wrapper.jar <span class="p">而导致构建失败。</span></p></li></ol><p style="padding-top: 10pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s147" style="padding-left: 30pt;text-indent: 0pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="229" height="77" alt="image" src="DS-附录-中国科学-3_files/Image_099.png"/></span></p><p class="s148" style="text-indent: 0pt;line-height: 7pt;text-align: left;">(a) Hazard 1</p><p class="s59" style="padding-top: 4pt;padding-left: 29pt;text-indent: 0pt;text-align: left;">Gradle Config</p><p style="text-indent: 0pt;text-align: left;"/><p class="s58" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Build Error</p><p style="text-indent: 0pt;text-align: left;"/><p class="s60" style="padding-left: 7pt;text-indent: 0pt;line-height: 6pt;text-align: left;">Project <span style=" color: #548235;">pr</span></p><p style="padding-top: 5pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s59" style="text-indent: 0pt;line-height: 109%;text-align: left;">Use feature “<span style=" color: #F00;">java-library</span>” introduced after Gradle <span style=" color: #F00;">v4.1</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s59" style="text-indent: 0pt;line-height: 109%;text-align: left;">Actually use Gradle <span style=" color: #F00;">v3.1 </span>due to missing Gradle config</p><p style="text-indent: 0pt;text-align: left;"/><p class="s58" style="padding-top: 3pt;padding-left: 3pt;text-indent: 0pt;text-align: left;">gradle-wrapper.properties</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="274" height="83" alt="image" src="DS-附录-中国科学-3_files/Image_100.png"/></span></p><p class="s148" style="text-indent: 0pt;line-height: 7pt;text-align: left;">(a) Hazard 1</p><p class="s59" style="padding-top: 6pt;padding-left: 19pt;text-indent: 4pt;line-height: 109%;text-align: left;">Run Gradle <span style=" color: #F00;">v4.1 </span>using wrapper scripts</p><p style="text-indent: 0pt;text-align: left;"/><p class="s59" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Run wrapper jar</p><p style="text-indent: 0pt;text-align: left;"/><p class="s58" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Build Error</p><p style="text-indent: 0pt;text-align: left;"/><p class="s149" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Project <span style=" color: #548235;">pr   </span><span class="s60">Gradle wrapper script </span><span class="s61">gradlew</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s59" style="text-indent: 0pt;line-height: 107%;text-align: left;">Use feature “<span style=" color: #F00;">java-library</span>” introduced after Gradle <span style=" color: #F00;">v4.1</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s59" style="text-indent: 0pt;line-height: 6pt;text-align: left;">Local Gradle version <span style=" color: #F00;">v3.1</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s58" style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gradle-wrapper.jar</p><p style="text-indent: 0pt;text-align: left;"/><p class="s44" style="padding-top: 3pt;padding-left: 6pt;text-indent: 25pt;line-height: 108%;text-align: left;"><a name="bookmark11">&zwnj;</a><span class="p">图 </span><span class="h2">A12 </span>异味 <span class="h1">2.1 </span>可能危害与对应触发场景 <span class="h2">Figure A12 </span><span class="s4">Possible Hazards and Triggering Scenarios of Smell 2.1.</span></p><p style="padding-top: 5pt;text-indent: 0pt;text-align: left;"><br/></p><p class="s44" style="padding-left: 1pt;text-indent: 27pt;line-height: 108%;text-align: left;"><span class="p">图 </span><span class="h2">A13 </span>异味 <span class="h1">2.2 </span>可能危害与对应触发场景 <span class="h2">Figure A13 </span><span class="s4">Possible Hazards and Triggering Scenarios of Smell 2.2.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 6pt;text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="360" height="131" alt="image" src="DS-附录-中国科学-3_files/Image_101.png"/></span></p><h4 style="text-indent: 0pt;line-height: 7pt;text-align: left;">(a) Hazard 2</h4><p class="s59" style="padding-top: 2pt;padding-left: 21pt;text-indent: 5pt;line-height: 113%;text-align: left;">Run Gradle <span style=" color: #F00;">v3.0 </span>using wrapper scripts</p><p style="text-indent: 0pt;text-align: left;"/><p class="s59" style="text-indent: 0pt;text-align: left;">Run wrapper jar</p><p style="text-indent: 0pt;text-align: left;"/><p class="s58" style="text-indent: 0pt;text-align: left;">Increase Build Cost</p><p style="text-indent: 0pt;text-align: left;"/><p class="s60" style="text-indent: 0pt;text-align: left;">Project <span style=" color: #548235;">pr</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s60" style="text-indent: 0pt;text-align: left;">Gradle wrapper script <span style=" color: #548235;">gradlew</span></p><p class="s60" style="padding-top: 5pt;padding-left: 25pt;text-indent: 0pt;text-align: left;">Actual checksum : <span style=" color: #F00;">695089</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s58" style="text-indent: 0pt;text-align: left;">Conflict!</p><p style="text-indent: 0pt;text-align: left;"/><p class="s60" style="text-indent: 0pt;text-align: left;">Expected checksum of <span style=" color: #F00;">v3.0: 42d7a2</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s58" style="text-indent: 0pt;line-height: 113%;text-align: left;">gradle-wrapper.jar v2.6 suffer Match the checksum of v2.6! from performance regression!</p><p style="text-indent: 0pt;text-align: left;"/><p class="s61" style="text-indent: 0pt;text-align: left;"><span style=" color: #000;">Project </span>pr    <span style=" color: #000;">Gradle wrapper script </span>gradlew <span style=" color: #F00;">Forged </span>gradle-wrapper.jar</p><p style="text-indent: 0pt;text-align: left;"/><p class="s58" style="padding-left: 65pt;text-indent: 0pt;text-align: left;">Security Vulnerability</p><p class="s58" style="padding-top: 5pt;text-indent: 0pt;text-align: left;">Attempt to execute malicious code!</p><p style="text-indent: 0pt;text-align: left;"/><p class="s59" style="text-indent: 0pt;text-align: left;">Run wrapper jar</p><p style="text-indent: 0pt;text-align: left;"/><h4 style="text-indent: 0pt;line-height: 7pt;text-align: left;">(b) Hazard 10</h4><p class="s59" style="padding-top: 6pt;padding-left: 23pt;text-indent: 5pt;line-height: 115%;text-align: left;">Run Gradle <span style=" color: #F00;">v3.0 </span>using wrapper scripts</p><p style="text-indent: 0pt;text-align: left;"/><div class="textbox" style="border:0.7pt solid #000000;display:block;min-height:14.9pt;width:50.0pt;"><p class="s73" style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">gradle-wrapper.jar</p></div><p style="text-indent: 0pt;text-align: left;"/><p class="s44" style="text-indent: 0pt;text-align: center;"><a name="bookmark12">&zwnj;</a><span class="p">图 </span><span class="h2">A14 </span>异味 <span class="h1">2.3 </span>可能危害与对应触发场景</p><p style="text-indent: 0pt;text-align: left;"><span><img width="288" height="66" alt="image" src="DS-附录-中国科学-3_files/Image_102.png"/></span></p><p class="s148" style="text-indent: 0pt;line-height: 7pt;text-align: left;">(a) Hazard 11</p><p class="s113" style="padding-top: 1pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Contains</p><p style="text-indent: 0pt;text-align: left;"/><p class="s113" style="text-indent: 0pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"/><p class="s114" style="text-indent: 0pt;text-align: left;">When upgrading to v2.0.0</p><p style="text-indent: 0pt;text-align: left;"/><p class="s151" style="text-indent: 0pt;text-align: left;">Modify</p><p style="text-indent: 0pt;text-align: left;"/><p class="s151" style="text-indent: 0pt;text-align: left;">Modify</p><p style="text-indent: 0pt;text-align: left;"/><p class="s114" style="text-indent: 0pt;text-align: left;">Increase maintenance cost</p><p style="text-indent: 0pt;text-align: left;"/><p class="s152" style="text-indent: 0pt;text-align: left;">Project <span style=" color: #548235;">pr </span><span class="s154">Module </span><span class="s155">mod1 </span>Dependency <span style=" color: #548235;">lib:</span><span style=" color: #F00;">v1.0.0</span></p><p class="s113" style="padding-top: 2pt;padding-left: 47pt;text-indent: 0pt;text-align: left;">Depends on  <span style=" color: #F00;">Not centrally managed!</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s154" style="padding-left: 26pt;text-indent: 0pt;text-align: left;">Module <span style=" color: #548235;">mod2 </span><span class="s152">Dependency </span><span class="s153">lib:</span><span class="s114">v1.0.0</span></p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="288" height="66" alt="image" src="DS-附录-中国科学-3_files/Image_103.png"/></span></p><p class="s148" style="text-indent: 0pt;line-height: 7pt;text-align: left;">(a) Hazard 11</p><p class="s113" style="padding-top: 1pt;padding-left: 24pt;text-indent: 0pt;text-align: left;">Contains</p><p style="text-indent: 0pt;text-align: left;"/><p class="s113" style="text-indent: 0pt;text-align: left;">Depends on</p><p style="text-indent: 0pt;text-align: left;"/><p class="s114" style="text-indent: 0pt;text-align: left;">When upgrading to v3.0.0</p><p style="text-indent: 0pt;text-align: left;"/><p class="s151" style="text-indent: 0pt;text-align: left;">Modify</p><p style="text-indent: 0pt;text-align: left;"/><p class="s151" style="text-indent: 0pt;text-align: left;">Modify</p><p style="text-indent: 0pt;text-align: left;"/><p class="s114" style="text-indent: 0pt;text-align: left;">Increase maintenance cost</p><p style="text-indent: 0pt;text-align: left;"/><p class="s152" style="text-indent: 0pt;text-align: right;">Project <span style=" color: #548235;">pr </span><span class="s154">Module </span><span class="s155">mod1 </span>Dependency <span style=" color: #548235;">lib:</span><span style=" color: #F00;">v1.0.0</span></p><p class="s113" style="padding-top: 2pt;text-indent: 0pt;text-align: right;">Depends on  <span style=" color: #F00;">Conflict!</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s154" style="text-indent: 0pt;text-align: right;">Module <span style=" color: #548235;">mod2 </span><span class="s152">Dependency </span><span class="s153">lib:</span><span class="s114">v2.0.0</span></p><p style="text-indent: 0pt;text-align: left;"/><h2 style="text-indent: 0pt;text-align: center;">Figure A14 <span class="s4">Examples of characteristics of Project-Level Dependency Smell.</span></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s147" style="padding-left: 16pt;text-indent: 0pt;text-align: left;">	</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s44" style="padding-left: 34pt;text-indent: 0pt;line-height: 15pt;text-align: left;"><a name="bookmark13">&zwnj;</a><span class="p">图 </span><span class="h2">A15 </span>异味 <span class="h1">2.4 </span>可能危害与对应触发场景      <span class="s156">图 </span><span class="h2">A16 </span>异味 <span class="h1">2.5 </span>可能危害与对应触发场景</p><h2 style="padding-top: 1pt;padding-left: 6pt;text-indent: 0pt;line-height: 9pt;text-align: left;">Figure A15 <span class="s4">Possible Hazards and Triggering Scenarios of Smell </span>Figure A16 <span class="s4">Possible Hazards and Triggering Scenarios of</span></h2><p class="s4" style="padding-top: 1pt;padding-left: 6pt;text-indent: 0pt;text-align: left;">2.4.                               Smell 2.5.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-left: 20pt;text-indent: 0pt;line-height: 13pt;text-align: left;">(2.3) <span class="p">构建工具启动器 </span>JAR <span class="p">异常</span></h2><p style="padding-left: 20pt;text-indent: 0pt;line-height: 13pt;text-align: left;">构建工具启动器 <span class="s4">JAR </span>异常可能造成构建成本增加和构建工具使用时的安全隐患，以下将详细阐述这些危害的具体触发场景。</p><ol id="l17"><li data-list-text="a."><p class="s4" style="padding-left: 30pt;text-indent: -9pt;line-height: 86%;text-align: left;"><span class="p">构建成本增加：其触发场景为项目构建工具启动器 </span>JAR <a href="#bookmark12" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">版本过旧，导致性能问题。以图</a>A14(a) <span class="p">为例，项目使用的是 </span>Gradle 3.0 <span class="p">版本，对应的 </span>gradle-wrapper.jar <span class="p">应该是 </span>3.0 <span class="p">版本，预期的校验和为 </span>42d7a2<span class="p">，但实际的校验和为 </span>695089<span class="p">，对应于 </span>2.6 <span class="p">版本。然而，</span>Gradle</p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">2.6 <span class="p">版本存在严重的性能下降问题，影响了 </span>Gradle <span class="p">包装器的启动时间，进而导致构建成本增加，而在 </span>3.0 <span class="p">版本中此问题已被修复。</span></p></li><li data-list-text="b."><p class="s4" style="padding-left: 31pt;text-indent: -10pt;line-height: 86%;text-align: justify;"><span class="p">构建工具使用时存在安全隐患：其触发场景为项目构建工具启动器 </span>JAR <a href="#bookmark12" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">被篡改。以图</a>A14(b) <span class="p">为例，项目中的 </span>gradle-wrapper.jar<span class="p">校验和与任何官方发布的已知版本都不相符。其被修改并添加了恶意代码，当开发者试图通过构建工具启动器启动构建工具时，可能会导致安全隐患，例如开发者的信息被窃取等。</span></p></li></ol><h2 style="padding-left: 20pt;text-indent: 0pt;line-height: 13pt;text-align: left;">(2.4) <span class="p">模块间库重复</span></h2><p style="padding-left: 20pt;text-indent: 0pt;line-height: 13pt;text-align: left;">模块间库重复可能会造成项目维护成本的增加，其触发场景如下。</p><ol id="l18"><li data-list-text="a."><p class="s4" style="padding-left: 31pt;text-indent: -10pt;line-height: 86%;text-align: left;"><span class="p">维护成本增加：其触发场景为项目对未集中管理的依赖库进行版本升级</span>. <a href="#bookmark13" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">以图</a>A15(a) <span class="p">为例，项目中的模块 </span>mod1 <span class="p">和 </span>mod2 <span class="p">之间存在同一依赖库 </span>lib <span class="p">的 </span>1.0.0 <span class="p">版本，但其版本分别在各自配置文件中进行声明，而并未进行统一指定</span>. <span class="p">在试图将 </span>lib <span class="p">升级至 </span>2.0.0 <span class="p">版本时，需</span></p></li></ol><p style="padding-top: 6pt;text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">要将修改同步至所有模块，这就导致项目维护成本的增加。</p><h2 style="padding-left: 20pt;text-indent: 0pt;line-height: 12pt;text-align: left;">(2.5) <span class="p">模块间库冲突</span></h2><p style="padding-left: 20pt;text-indent: 0pt;line-height: 12pt;text-align: left;">模块间库冲突的危害和模块间库重复类似，同样会增加项目维护成本，并可能增加下游项目出现依赖冲突的几率。</p><p class="s4" style="padding-left: 5pt;text-indent: 15pt;line-height: 86%;text-align: left;">a. <a href="#bookmark13" style=" color: black; font-family:&quot;Wawati SC&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 7.5pt;">维护成本增加：其触发场景为项目对未集中管理的依赖库进行版本升级。以图</a>A16(a) <span class="p">为例，项目中的模块 </span>mod1 <span class="p">和 </span>mod2 <span class="p">分别依赖于依赖库 </span>lib <span class="p">的 </span>1.0.0 <span class="p">和 </span>2.0.0 <span class="p">版本。在试图将 </span>lib <span class="p">升级至 </span>3.0.0 <span class="p">版本时，需要将修改同步至所有模块，这就导致项目维护成本的增加。</span></p></body></html>
